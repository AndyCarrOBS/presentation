<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OBS Presentation - Operator Markets Overview</title>
    
    <!-- Leaflet CSS and JS from CDN -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <!-- TopoJSON library -->
    <script src="https://unpkg.com/topojson-client@3"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow: hidden;
        }
        
        .slide {
            display: none;
            width: 100vw;
            height: 100vh;
            position: absolute;
            top: 0;
            left: 0;
            padding: 40px;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .slide.active {
            display: flex;
        }
        
        /* Header with OBS Logo */
        .header {
            display: flex;
            justify-content: flex-start;
            align-items: center;
            margin-bottom: 20px;
            background-color: #0066CC; /* OBS blue */
            padding: 15px 20px;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            width: 100%;
            gap: 20px;
        }
        
        .header-title {
            color: white;
            font-size: 1.8rem;
            font-weight: 600;
            margin: 0;
        }
        
        .obs-logo {
            height: 60px;
            width: auto;
        }
        
        .header-text {
            color: white;
        }
        
        /* Footer with Roku */
        .footer {
            display: flex;
            justify-content: flex-start;
            align-items: center;
            gap: 8px;
            padding: 15px 20px;
            position: absolute;
            bottom: 20px;
            left: 20px;
        }
        
        .footer-text {
            color: #0066CC; /* OBS blue */
            font-size: 14px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .roku-logo {
            height: 30px;
            width: auto;
        }
        
        .footer .obs-logo {
            height: 30px;
            width: auto;
        }
        
        /* Slide 1: Title Screen */
        .title-slide {
            justify-content: center;
            align-items: center;
            text-align: center;
            color: white;
            padding-top: 100px; /* Add padding to account for header */
        }
        
        .title-slide h1 {
            font-size: 4rem;
            margin-bottom: 20px;
            color: #0066CC; /* OBS blue */
            text-shadow: none;
        }
        
        .title-slide .subtitle {
            font-size: 1.5rem;
            opacity: 0.9;
        }
        
        /* Slide 2: Agenda */
        .agenda-slide {
            background: white;
            color: #333;
        }
        
        .agenda-slide .content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 40px;
        }
        
        .agenda-slide h2 {
            font-size: 3rem;
            margin-bottom: 40px;
            color: #667eea;
            text-align: center;
        }
        
        .agenda-list {
            list-style: none;
            font-size: 1.8rem;
            line-height: 2.5;
        }
        
        .agenda-list li {
            padding: 15px 0;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .agenda-list li:before {
            content: "▸ ";
            color: #667eea;
            font-weight: bold;
            margin-right: 15px;
        }
        
        /* Slide 3: Map */
        .map-slide {
            background: white;
        }
        
        .map-slide .content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .map-slide h2 {
            font-size: 2rem;
            margin-bottom: 20px;
            color: #667eea;
            text-align: center;
        }
        
        /* Slide 4: Flow Diagrams */
        .flow-slide {
            background: white;
            color: #333;
        }
        
        .flow-slide .content {
            flex: 1;
            display: flex;
            gap: 40px;
            padding: 40px;
            justify-content: space-between;
        }
        
        .flow-column {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .flow-column h2 {
            font-size: 2.5rem;
            margin-bottom: 30px;
            color: #667eea;
            text-align: center;
        }
        
        .flow-diagram {
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
        }
        
        .flow-block {
            background-color: #7502A1; /* Roku purple */
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            text-align: center;
            min-width: 200px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        
        .flow-arrow {
            font-size: 2rem;
            color: #7502A1;
            font-weight: bold;
        }
        
        /* Slide 5: Framework Diagram */
        .framework-slide {
            background: white;
            color: #333;
        }
        
        .framework-slide .content {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 40px;
            justify-content: space-between;
            position: relative;
        }
        
        .ellipse-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
            flex: 1;
            justify-content: center;
        }
        
        .ellipse {
            background-color: #7502A1; /* Roku purple */
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            font-weight: 600;
            text-align: center;
            padding: 30px 40px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .ellipse-1 {
            width: 100%;
            height: 120px;
        }
        
        .ellipse-2 {
            width: 66.67%;
            height: 100px;
        }
        
        .ellipse-3 {
            width: 50%;
            height: 80px;
        }
        
        .ellipse-arrow {
            font-size: 2.5rem;
            color: #7502A1;
            font-weight: bold;
        }
        
        .bottom-boxes {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-top: 40px;
        }
        
        .numbered-box {
            background-color: #0066CC; /* OBS blue */
            color: white;
            width: 80px;
            height: 60px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        
        .box-arrow {
            font-size: 1.5rem;
            color: #0066CC;
            font-weight: bold;
        }
        
        /* Truncated elliptical cone from box 6 to top ellipse */
        .cone-svg {
            position: absolute;
            bottom: 140px;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 1200px;
            height: calc(100% - 280px);
            min-height: 400px;
            pointer-events: none;
            z-index: 5;
            overflow: visible;
        }
        
        .cone-svg path {
            fill: #22c55e;
            opacity: 0.5;
            stroke: #16a34a;
            stroke-width: 2;
        }
        
        /* Slide 6: CI+ Operators */
        .operators-slide {
            background: white;
            color: #333;
        }
        
        .operators-slide .content {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 0 60px 40px 60px;
            justify-content: flex-start;
            margin-top: 100px;
        }
        
        .operators-slide h2 {
            display: none; /* Title moved to header */
        }
        
        .operators-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 40px;
            align-items: center;
            justify-items: center;
            padding: 30px;
            max-width: 1600px;
            margin: 0 auto;
        }
        
        .operators-slide .operators-grid {
            padding-top: 0;
            padding-bottom: 20px;
        }
        
        .operator-logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 150px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
            overflow: hidden;
        }
        
        .operator-logo-container span {
            text-align: center;
        }
        
        .operator-logo-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .operator-logo {
            max-width: 100%;
            max-height: 100%;
            width: auto;
            height: auto;
            object-fit: contain;
            object-position: center;
        }
        
        #map {
            height: 100%;
            width: 100%;
            border-radius: 10px;
            z-index: 1;
        }
        
        /* Overlay/Modal for country details */
        .overlay {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            justify-content: center;
            align-items: center;
        }
        
        .overlay.active {
            display: flex;
        }
        
        .overlay-content {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            width: 80%;
            max-width: 700px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            position: relative;
            color: #333; /* Ensure text color is dark */
        }
        
        .close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 32px;
            font-weight: bold;
            cursor: pointer;
            color: #666;
            line-height: 1;
        }
        
        .close-btn:hover {
            color: #000;
        }
        
        .overlay-content h2 {
            color: #667eea;
            margin-bottom: 12px;
            padding-right: 40px;
            font-size: 1.5em;
        }
        
        .overlay-content h3 {
            color: #333;
            margin-bottom: 8px;
            font-size: 1.1em;
        }
        
        .overlay-content p {
            color: #333;
            line-height: 1.4;
            margin: 8px 0;
        }
        
        .overlay-content .operators {
            margin-top: 12px;
            color: #333;
        }
        
        .overlay-content .operators ul {
            list-style: none;
            padding-left: 0;
            color: #333;
            margin: 0;
        }
        
        .overlay-content .operators li {
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
            color: #333;
            font-size: 0.95em;
            line-height: 1.4;
            list-style: none;
        }
        
        .overlay-content .operators li:last-child {
            border-bottom: none;
        }
        
        .overlay-content .operators li::before {
            content: "• ";
            color: #667eea;
            font-weight: bold;
            margin-right: 8px;
            display: inline;
        }
        
        .operator-item {
            display: block;
        }
        
        .operator-name-container {
            display: inline;
        }
        
        .operator-name-container > * {
            display: inline;
            vertical-align: middle;
        }
        
        .operator-name {
            font-weight: 600;
            color: #333;
            font-size: 0.95em;
            display: inline;
        }
        
        .operator-stats {
            display: flex;
            flex-direction: column;
            gap: 2px;
            margin-left: 16px;
            margin-top: 2px;
        }
        
        .operator-stats .stat {
            font-size: 0.85em;
            color: #555;
            line-height: 1.3;
        }
        
        .operator-stats .stat strong {
            color: #667eea;
            margin-right: 4px;
        }
        
        .operator-stats .stat.subscribers {
            color: #2d8659;
        }
        
        .operator-stats .stat.tv-homes {
            color: #7c3aed;
        }
        
        .operator-notes {
            font-size: 0.8em;
            color: #666;
            font-style: italic;
            margin-left: 16px;
            margin-top: 1px;
            line-height: 1.3;
        }
        
        .ci-plus-indicator {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 0.7em;
            font-weight: 600;
            margin-left: 6px;
            vertical-align: middle;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }
        
        .ci-plus-indicator.pay-lite {
            background-color: #22c55e;
            color: white;
        }
        
        .ci-plus-indicator.premium {
            background-color: #ef4444;
            color: white;
        }
        
        /* CI+ Filter Button */
        .map-controls {
            margin-bottom: 15px;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            align-items: center;
        }
        
        /* Toggle Switch Container */
        .toggle-switch-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .filter-label {
            font-size: 0.9em;
            font-weight: 500;
            color: #333;
            white-space: nowrap;
        }
        
        /* Toggle Switch Styles */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 26px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: 0.3s;
            border-radius: 26px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }
        
        /* CI+ Toggle - Red when active */
        .ci-plus-toggle input:checked + .toggle-slider {
            background-color: #dc2626;
        }
        
        .ci-plus-toggle input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }
        
        /* Nordic DVB Toggle - Green when active */
        .nordic-dvb-toggle input:checked + .toggle-slider {
            background-color: #059669;
        }
        
        .nordic-dvb-toggle input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }
        
        /* HbbTV Toggle - Purple when active */
        .hbbtv-toggle input:checked + .toggle-slider {
            background-color: #7c3aed;
        }
        
        .hbbtv-toggle input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }
        
        /* OBS CI+ Toggle - Orange when active */
        .obs-ci-plus-toggle input:checked + .toggle-slider {
            background-color: #f59e0b;
        }
        
        .obs-ci-plus-toggle input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }
        
        /* T-Mobile/Magenta Toggle - Teal/Cyan when active */
        .tmobile-toggle input:checked + .toggle-slider {
            background-color: #06b6d4;
        }
        
        .tmobile-toggle input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }
        
        /* EU5 Toggle - Blue when active */
        .eu5-toggle input:checked + .toggle-slider {
            background-color: #3b82f6;
        }
        
        .eu5-toggle input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }
        
        /* Canal+ Toggle - Pink/Magenta when active */
        .canal-plus-toggle input:checked + .toggle-slider {
            background-color: #ec4899;
        }
        
        .canal-plus-toggle input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }
        
        /* UPC Toggle - Indigo when active */
        .upc-toggle input:checked + .toggle-slider {
            background-color: #6366f1;
        }
        
        .upc-toggle input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }
        
        /* Hover effects */
        .toggle-switch:hover .toggle-slider {
            box-shadow: 0 0 4px rgba(0,0,0,0.3);
        }
        
        /* Navigation */
        .nav-buttons {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1500;
            display: flex;
            gap: 10px;
        }
        
        .nav-btn {
            padding: 12px 24px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            color: #667eea;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }
        
        .nav-btn:hover {
            background: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .slide-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1500;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 14px;
            color: #667eea;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <!-- Slide 1: Title Screen -->
    <div class="slide title-slide active">
        <div class="header">
            <img src="img/OBS-Logo.png" alt="OBS Logo" class="obs-logo">
        </div>
        <div class="content">
            <h1>Operator Markets Overview</h1>
            <p class="subtitle">European Market Analysis</p>
        </div>
        <div class="footer">
            <span class="footer-text">
                Prepared for
                <img src="img/roku-logo.png" alt="Roku Logo" class="roku-logo">
                by
                <img src="img/OBS-Logo.png" alt="OBS Logo" class="obs-logo">
            </span>
        </div>
    </div>
    
    <!-- Slide 2: Agenda -->
    <div class="slide agenda-slide">
        <div class="header">
            <img src="img/OBS-Logo.png" alt="OBS Logo" class="obs-logo">
        </div>
        <div class="content">
            <h2>Agenda</h2>
            <ul class="agenda-list">
                <li>Overview of Operator Markets</li>
                <li>2 ways to approach the problem</li>
                <li>What has worked</li>
                <li>Key Steps for Success</li>
            </ul>
        </div>
        <div class="footer">
            <span class="footer-text">prepared for</span>
            <img src="img/roku-logo.png" alt="Roku Logo" class="roku-logo">
        </div>
    </div>
    
    <!-- Slide 3: Interactive Map -->
    <div class="slide map-slide">
        <div class="header">
            <img src="img/OBS-Logo.png" alt="OBS Logo" class="obs-logo">
        </div>
        <div class="content">
            <h2>Europe Operator Markets</h2>
            <div class="map-controls">
                <div class="toggle-switch-container">
                    <span class="filter-label">CI+ Countries</span>
                    <label class="toggle-switch ci-plus-toggle">
                        <input type="checkbox" id="ci-plus-filter-input" onchange="toggleCiPlusFilter()">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="toggle-switch-container">
                    <span class="filter-label">Nordic DVB</span>
                    <label class="toggle-switch nordic-dvb-toggle">
                        <input type="checkbox" id="nordic-dvb-filter-input" onchange="toggleNordicDvbFilter()">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="toggle-switch-container">
                    <span class="filter-label">HbbTV</span>
                    <label class="toggle-switch hbbtv-toggle">
                        <input type="checkbox" id="hbbtv-filter-input" onchange="toggleHbbtvFilter()">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="toggle-switch-container">
                    <span class="filter-label">Recent OBS CI+</span>
                    <label class="toggle-switch obs-ci-plus-toggle">
                        <input type="checkbox" id="obs-ci-plus-filter-input" onchange="toggleObsCiPlusFilter()">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="toggle-switch-container">
                    <span class="filter-label">T-Mobile/Magenta</span>
                    <label class="toggle-switch tmobile-toggle">
                        <input type="checkbox" id="tmobile-filter-input" onchange="toggleTmobileFilter()">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="toggle-switch-container">
                    <span class="filter-label">EU5</span>
                    <label class="toggle-switch eu5-toggle">
                        <input type="checkbox" id="eu5-filter-input" onchange="toggleEu5Filter()">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="toggle-switch-container">
                    <span class="filter-label">Canal+</span>
                    <label class="toggle-switch canal-plus-toggle">
                        <input type="checkbox" id="canal-plus-filter-input" onchange="toggleCanalPlusFilter()">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="toggle-switch-container">
                    <span class="filter-label">UPC</span>
                    <label class="toggle-switch upc-toggle">
                        <input type="checkbox" id="upc-filter-input" onchange="toggleUpcFilter()">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>
            <div id="map"></div>
        </div>
        <div class="footer">
            <span class="footer-text">prepared for</span>
            <img src="img/roku-logo.png" alt="Roku Logo" class="roku-logo">
        </div>
    </div>
    
    <!-- Slide 4: Flow Diagrams -->
    <div class="slide flow-slide">
        <div class="header">
            <img src="img/OBS-Logo.png" alt="OBS Logo" class="obs-logo">
        </div>
        <div class="content">
            <div class="flow-column">
                <h2>Spec Based</h2>
                <div class="flow-diagram">
                    <div class="flow-block">Sign NDA</div>
                    <div class="flow-arrow">↓</div>
                    <div class="flow-block">Access Specs</div>
                    <div class="flow-arrow">↓</div>
                    <div class="flow-block">Analyse Specs</div>
                    <div class="flow-arrow">↓</div>
                    <div class="flow-block">Implement Designs</div>
                    <div class="flow-arrow">↓</div>
                    <div class="flow-block">Access Test Material</div>
                    <div class="flow-arrow">↓</div>
                    <div class="flow-block">Run Tests</div>
                    <div class="flow-arrow">↓</div>
                    <div class="flow-block">Analyse Results</div>
                    <div class="flow-arrow">↓</div>
                    <div class="flow-block">ESR</div>
                </div>
            </div>
            <div class="flow-column">
                <h2>Test Strategy</h2>
                <div class="flow-diagram">
                    <div class="flow-block">Sign NDA</div>
                    <div class="flow-arrow">↓</div>
                    <div class="flow-block">Access Test Material + Specs</div>
                    <div class="flow-arrow">↓</div>
                    <div class="flow-block">Test and Iterate</div>
                    <div class="flow-arrow">↓</div>
                    <div class="flow-block">Automate</div>
                </div>
            </div>
        </div>
        <div class="footer">
            <span class="footer-text">prepared for</span>
            <img src="img/roku-logo.png" alt="Roku Logo" class="roku-logo">
        </div>
    </div>
    
    <!-- Slide 5: Framework Diagram -->
    <div class="slide framework-slide">
        <div class="header">
            <img src="img/OBS-Logo.png" alt="OBS Logo" class="obs-logo">
        </div>
        <div class="content">
            <div class="ellipse-container">
                <div class="ellipse ellipse-1">Roku QA Test Framework</div>
                <div class="ellipse-arrow">↓</div>
                <div class="ellipse ellipse-2">Roku Chassis QA Framework</div>
                <div class="ellipse-arrow">↓</div>
                <div class="ellipse ellipse-3">Operator Surface</div>
            </div>
            <div class="bottom-boxes">
                <div class="numbered-box">1</div>
                <div class="box-arrow">→</div>
                <div class="numbered-box">2</div>
                <div class="box-arrow">→</div>
                <div class="numbered-box">3</div>
                <div class="box-arrow">→</div>
                <div class="numbered-box">4</div>
                <div class="box-arrow">→</div>
                <div class="numbered-box">5</div>
                <div class="box-arrow">→</div>
                <div class="numbered-box" id="box-6">6</div>
                <div class="box-arrow">→</div>
                <div class="numbered-box">7</div>
                <div class="box-arrow">→</div>
                <div class="numbered-box">8</div>
            </div>
            <!-- Truncated elliptical cone from box 6 to top ellipse -->
            <svg class="cone-svg" viewBox="0 0 100 100" preserveAspectRatio="none">
                <defs>
                    <linearGradient id="coneGradient" x1="0%" y1="100%" x2="0%" y2="0%">
                        <stop offset="0%" style="stop-color:#22c55e;stop-opacity:0.8" />
                        <stop offset="100%" style="stop-color:#22c55e;stop-opacity:0.5" />
                    </linearGradient>
                </defs>
                <!-- Truncated cone shape: narrow at bottom (box 6), expanding to 20% of top ellipse width -->
                <!-- Bottom: ~8% width (centered), Top: 20% width (centered at 40-60) -->
                <path d="M 46 100 L 54 100 L 60 0 L 40 0 Z" fill="url(#coneGradient)" stroke="#16a34a" stroke-width="0.5"/>
            </svg>
        </div>
        <div class="footer">
            <span class="footer-text">prepared for</span>
            <img src="img/roku-logo.png" alt="Roku Logo" class="roku-logo">
        </div>
    </div>
    
    <!-- Slide 6: CI+ Operators -->
    <div class="slide operators-slide">
        <div class="header">
            <img src="img/OBS-Logo.png" alt="OBS Logo" class="obs-logo">
            <h1 class="header-title">Recent Operator Experience</h1>
        </div>
        <div class="content">
            <h2>Recent Operator Experience</h2>
            <div class="operators-grid">
                <div class="operator-logo-container">
                    <img src="img/ziggo-logo.png" alt="Ziggo" class="operator-logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <span style="display:none; font-weight:bold; color:#333; font-size:1.2rem;">Ziggo</span>
                </div>
                <div class="operator-logo-container">
                    <img src="img/pyur-logo.png" alt="PYUR" class="operator-logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <span style="display:none; font-weight:bold; color:#333; font-size:1.2rem;">PYUR</span>
                </div>
                <div class="operator-logo-container">
                    <img src="img/vodafone-logo.png" alt="Vodafone/Unitymedia" class="operator-logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <span style="display:none; font-weight:bold; color:#333; font-size:1.2rem;">Vodafone</span>
                </div>
                <div class="operator-logo-container">
                    <img src="img/TivuSat-UHD.jpg" alt="TIVUSAT" class="operator-logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <span style="display:none; font-weight:bold; color:#333; font-size:1.2rem;">TIVUSAT</span>
                </div>
                <div class="operator-logo-container">
                    <img src="img/hdplus-logo.png" alt="HD+" class="operator-logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <span style="display:none; font-weight:bold; color:#333; font-size:1.2rem;">HD+</span>
                </div>
                <div class="operator-logo-container">
                    <img src="img/fransat-logo.png" alt="Fransat" class="operator-logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <span style="display:none; font-weight:bold; color:#333; font-size:1.2rem;">Fransat</span>
                </div>
                <div class="operator-logo-container">
                    <img src="img/orf-logo.png" alt="ORF" class="operator-logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <span style="display:none; font-weight:bold; color:#333; font-size:1.2rem;">ORF</span>
                </div>
                <div class="operator-logo-container">
                    <img src="img/yousee-logo.png" alt="YouSee" class="operator-logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <span style="display:none; font-weight:bold; color:#333; font-size:1.2rem;">YouSee</span>
                </div>
                <div class="operator-logo-container">
                    <img src="img/voo-logo.jpg" alt="Voo" class="operator-logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <span style="display:none; font-weight:bold; color:#333; font-size:1.2rem;">Voo</span>
                </div>
                <div class="operator-logo-container">
                    <img src="img/nordig-logo.svg" alt="NorDig" class="operator-logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <span style="display:none; font-weight:bold; color:#333; font-size:1.2rem;">NorDig</span>
                </div>
                <div class="operator-logo-container">
                    <img src="img/mindigtv-logo.jpg" alt="MinDigTV" class="operator-logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <span style="display:none; font-weight:bold; color:#333; font-size:1.2rem;">MinDigTV</span>
                </div>
                <div class="operator-logo-container">
                    <img src="img/canal-digital.png" alt="M7 (Canal Digital)" class="operator-logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <span style="display:none; font-weight:bold; color:#333; font-size:1.2rem;">Canal Digital</span>
                </div>
            </div>
        </div>
        <div class="footer">
            <span class="footer-text">prepared for</span>
            <img src="img/roku-logo.png" alt="Roku Logo" class="roku-logo">
        </div>
    </div>
    
    <!-- Country Details Overlay -->
    <div id="country-overlay" class="overlay">
        <div class="overlay-content">
            <span class="close-btn" onclick="closeOverlay()">&times;</span>
            <h2 id="overlay-title">Country Details</h2>
            <div id="overlay-data">
                <!-- Dynamic data will be loaded here -->
            </div>
        </div>
    </div>
    
    <!-- Navigation -->
    <div class="slide-indicator">
        <span id="slide-number">1</span> / <span id="total-slides">6</span>
    </div>
    <div class="nav-buttons">
        <button class="nav-btn" id="prev-btn" onclick="previousSlide()" disabled>Previous</button>
        <button class="nav-btn" id="next-btn" onclick="nextSlide()">Next</button>
    </div>
    
    <script>
        // Country data with operators and subscriber/TV home information
        const countryData = {
            "Armenia": [
                {name: "Telecom Armenia", subscribers: "~282,879 fixed-line (2024)", tv_homes: null, notes: "Telco - fixed-line and broadband services", ci_plus: null},
                {name: "Viva-MTS", subscribers: "~2.1 million (2017)", tv_homes: null, notes: "Telco - major mobile operator", ci_plus: null},
                {name: "Public Television of Armenia (PTA)", subscribers: null, tv_homes: "Near universal coverage", notes: "Public broadcaster - First Channel, First News Channel, First International Channel", ci_plus: false},
                {name: "Shoghakat TV", subscribers: null, tv_homes: "~90% territory coverage", notes: "Public broadcaster - spiritual and cultural programming, founded by Armenian Apostolic Church", ci_plus: false},
                {name: "Armenia TV", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - leading private channel (1997), first Full HD broadcaster, ~50% private market share", ci_plus: false},
                {name: "Shant TV", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - founded 1994, news and entertainment", ci_plus: false},
                {name: "ATV (Armenia)", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - thematic channels (Hay TV, Kinoman, Xaxaliq TV)", ci_plus: false},
                {name: "Kentron TV", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - generalist programming", ci_plus: false},
                {name: "Fifth Channel", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - news and socio-political content", ci_plus: false}
            ],
            "Azerbaijan": [
                {name: "Azercell", subscribers: "~5 million", tv_homes: null, notes: "Telco - largest mobile operator (~48-51% market share), 4G coverage 94-98%", ci_plus: null},
                {name: "Bakcell", subscribers: "~3 million", tv_homes: null, notes: "Telco - first private telecom company (1994), covers 99.9% population", ci_plus: null},
                {name: "Nar Mobile", subscribers: null, tv_homes: null, notes: "Telco - mobile operator", ci_plus: null},
                {name: "Cable TV Operators", subscribers: "~204,448 (2024)", tv_homes: null, notes: "Cable TV - 17 cable network operators, 13% increase in 2024", ci_plus: null},
                {name: "IPTV Operators", subscribers: "~19,668 (2024)", tv_homes: null, notes: "IPTV - 32 IPTV operators, 26% decrease in 2024", ci_plus: null},
                {name: "AzTV (Azerbaijan Television)", subscribers: null, tv_homes: "99% penetration (2014)", notes: "Public broadcaster - state-owned, established 1956, AzTV, Mədəniyyət TV, İdman TV channels", ci_plus: false},
                {name: "İTV (İctimai Television)", subscribers: null, tv_homes: null, notes: "Public broadcaster - launched 2005", ci_plus: false},
                {name: "İdman Azerbaijan TV", subscribers: null, tv_homes: null, notes: "Public broadcaster - state-owned sports channel, launched 2009", ci_plus: false},
                {name: "Medeniyyet TV", subscribers: null, tv_homes: null, notes: "Public broadcaster - state-owned culture channel, launched 2011", ci_plus: false},
                {name: "ATV (Azad Azerbaijan TV)", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - popular private channel", ci_plus: false},
                {name: "CBC (Caspian Broadcasting Company)", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - news and entertainment", ci_plus: false},
                {name: "Space TV", subscribers: null, tv_homes: null, notes: "Commercial broadcaster", ci_plus: false},
                {name: "Xazar TV", subscribers: null, tv_homes: null, notes: "Commercial broadcaster", ci_plus: false},
                {name: "ARB", subscribers: null, tv_homes: null, notes: "Commercial broadcaster", ci_plus: false}
            ],
            "Austria": [
                {name: "Magenta TV (UPC)", subscribers: null, tv_homes: "~4.2M TV households (estimated)", notes: "Deutsche Telekom (IPTV/Cable) - typically uses operator STBs", ci_plus: null},
                {name: "ORS Austria", subscribers: null, tv_homes: null, notes: "Broadcasting infrastructure provider", ci_plus: null},
                {name: "M7 (HD Austria)", subscribers: null, tv_homes: null, notes: "Satellite platform - uses smart cards, CI+ compatibility varies", ci_plus: null},
                {name: "SimpliTV SAT", subscribers: null, tv_homes: null, notes: "May require CI+ cam for encrypted channels", ci_plus: true, pay_type: "pay-lite"},
                {name: "ORF (SAT+Terrestrial)", subscribers: null, tv_homes: "Near universal coverage", notes: "Public broadcaster - CI+ modules used for encrypted satellite channels", ci_plus: true, pay_type: "pay-lite"},
                {name: "SimpliTV Terrestrial", subscribers: null, tv_homes: null, notes: "May require CI+ cam for encrypted channels", ci_plus: true, pay_type: "pay-lite"}
            ],
            "Belarus": [
                {name: "MTS Belarus", subscribers: "~5.7 million (mid-2024)", tv_homes: null, notes: "Telco - largest mobile operator, joint venture Beltelecom (51%) and MTS Russia (49%)", ci_plus: null},
                {name: "A1 Belarus", subscribers: "~4.959 million (Q3 2024)", tv_homes: null, notes: "Telco - Telekom Austria Group, mobile and fixed internet services", ci_plus: null},
                {name: "life:)", subscribers: "~1.5 million (Q2 2024)", tv_homes: null, notes: "Telco - operated by Turkcell", ci_plus: null},
                {name: "Beltelecom", subscribers: "~2.5 million fixed-broadband (2023)", tv_homes: null, notes: "Telco - state-owned, dominates fixed-line market (78% share), Zala IPTV service", ci_plus: null},
                {name: "Cable Operators", subscribers: null, tv_homes: null, notes: "Cable TV - ~130 cable operators, major providers MTIS and Cosmos TV in Minsk", ci_plus: null},
                {name: "BTRC (Belteleradiocompany)", subscribers: null, tv_homes: "Near universal coverage", notes: "Public broadcaster - Belarus 1, Belarus 2, Belarus 3, Belarus 4, Belarus 5, Belarus 24, NTV-Belarus channels", ci_plus: false},
                {name: "ONT (All-National Television)", subscribers: null, tv_homes: null, notes: "Public broadcaster - majority state-owned, rebroadcasts Russia's Channel One", ci_plus: false},
                {name: "Capital Television (CTV)", subscribers: null, tv_homes: null, notes: "Public broadcaster - state-owned, national coverage since 2005", ci_plus: false},
                {name: "VoyenTV", subscribers: null, tv_homes: null, notes: "Public broadcaster - Ministry of Defence channel, military-related content", ci_plus: false}
            ],
            "Belgium": [
                {name: "Telenet", subscribers: null, tv_homes: "~4.8M TV households, >95% cable penetration", notes: "Major Belgian cable operator - CI+ cam typically required for encrypted channels", ci_plus: true, pay_type: "premium"},
                {name: "Proximus Pickx", subscribers: "~1.41 million", tv_homes: null, notes: "IPTV service - typically uses operator STBs", ci_plus: null},
                {name: "Voo", subscribers: null, tv_homes: null, notes: "Cable operator - CI+ cam typically required", ci_plus: true, pay_type: "premium"},
                {name: "M7 (Telesat, TV Vlanderen)", subscribers: null, tv_homes: null, notes: "Satellite platform - uses smart cards, CI+ compatibility varies", ci_plus: null},
                {name: "VRT", subscribers: null, tv_homes: "Near universal coverage in Flanders", notes: "Flemish public broadcaster", ci_plus: false},
                {name: "RTBF", subscribers: null, tv_homes: "Near universal coverage in Wallonia", notes: "French-speaking public broadcaster", ci_plus: false}
            ],
            "Bulgaria": [
                {name: "Vivacom", subscribers: null, tv_homes: null, notes: "Telco - largest telecom company, EON TV IPTV service, over 220 channels, satellite and cable", ci_plus: null},
                {name: "Bulsatcom", subscribers: null, tv_homes: null, notes: "Satellite/Telco - largest pay-TV subscriber base, acquired by United Group (2024), satellite TV and IPTV", ci_plus: null},
                {name: "A1 Bulgaria", subscribers: null, tv_homes: null, notes: "Telco - A1 Xplore TV GO service, over 80 live TV channels including 5 in 4K UHD", ci_plus: null},
                {name: "BNT (Bulgarian National Television)", subscribers: null, tv_homes: "Near universal coverage", notes: "Public broadcaster", ci_plus: false},
                {name: "bTV Media Group", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - bTV, bTV Action, bTV Cinema, bTV Comedy, bTV Story, RING channels", ci_plus: false},
                {name: "Nova Broadcasting Group", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - Nova TV, Kino Nova, Nova News, Nova Sport, DIEMA channels, acquired by United Group (2021)", ci_plus: false}
            ],
            "Croatia": [
                {name: "evoTV (merged with Telekom)", subscribers: null, tv_homes: null, notes: "IPTV service - CI+ v1.3 supported for encrypted channels", ci_plus: true, pay_type: "pay-lite"},
                {name: "Hakom", subscribers: null, tv_homes: null, notes: "Regulatory body - not an operator", ci_plus: null}
            ],
            "Czech": [
                {name: "O2 Czech Republic", subscribers: null, tv_homes: null, notes: "Telco - O2 TV IPTV service, merged with Voyo to create Oneplay (2025)", ci_plus: null},
                {name: "Vodafone Czech Republic", subscribers: null, tv_homes: null, notes: "Telco - Vodafone TV IPTV service, acquired UPC (2019), over 100 channels", ci_plus: null},
                {name: "T-Mobile Czech Republic (Magenta TV)", subscribers: null, tv_homes: null, notes: "Telco - Magenta TV IPTV service, over 170 channels in 4K, rebranded from T-Mobile TV (2023)", ci_plus: null},
                {name: "M7 (Skylink CZ)", subscribers: "~1 million (2010)", tv_homes: null, notes: "Satellite platform - Czech and Slovak TV stations, uses smart cards, CI+ compatibility varies", ci_plus: null},
                {name: "UPC (now Vodafone)", subscribers: null, tv_homes: null, notes: "Cable operator - acquired by Vodafone (2019), CI+ cam typically required for encrypted channels", ci_plus: true, pay_type: "premium"},
                {name: "T2 CZ", subscribers: null, tv_homes: null, notes: "Terrestrial platform - CI+ cam may be required for encrypted channels", ci_plus: true, pay_type: "pay-lite"},
                {name: "Oneplay", subscribers: null, tv_homes: null, notes: "Streaming/VOD service - merged Voyo (TV Nova) and O2 TV (2025)", ci_plus: null},
                {name: "Česká televize (ČT)", subscribers: null, tv_homes: "Near universal coverage", notes: "Public broadcaster - ČT1, ČT2, ČT24, ČT sport, ČT :D channels", ci_plus: false},
                {name: "TV Nova", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - leading commercial channel, operates Voyo VOD", ci_plus: false},
                {name: "Prima", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - Prima, Prima COOL, Prima LOVE, Prima ZOOM, Prima MAX, Prima KRIMI, Prima STAR channels", ci_plus: false},
                {name: "Warner TV", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - free-to-air channel launched 2024", ci_plus: false}
            ],
            "Czech Rep.": [
                {name: "O2 Czech Republic", subscribers: null, tv_homes: null, notes: "Telco - O2 TV IPTV service, merged with Voyo to create Oneplay (2025)", ci_plus: null},
                {name: "Vodafone Czech Republic", subscribers: null, tv_homes: null, notes: "Telco - Vodafone TV IPTV service, acquired UPC (2019), over 100 channels", ci_plus: null},
                {name: "T-Mobile Czech Republic (Magenta TV)", subscribers: null, tv_homes: null, notes: "Telco - Magenta TV IPTV service, over 170 channels in 4K, rebranded from T-Mobile TV (2023)", ci_plus: null},
                {name: "M7 (Skylink CZ)", subscribers: "~1 million (2010)", tv_homes: null, notes: "Satellite platform - Czech and Slovak TV stations, uses smart cards, CI+ compatibility varies", ci_plus: null},
                {name: "UPC (now Vodafone)", subscribers: null, tv_homes: null, notes: "Cable operator - acquired by Vodafone (2019), CI+ cam typically required for encrypted channels", ci_plus: true, pay_type: "premium"},
                {name: "T2 CZ", subscribers: null, tv_homes: null, notes: "Terrestrial platform - CI+ cam may be required for encrypted channels", ci_plus: true, pay_type: "pay-lite"},
                {name: "Oneplay", subscribers: null, tv_homes: null, notes: "Streaming/VOD service - merged Voyo (TV Nova) and O2 TV (2025)", ci_plus: null},
                {name: "Česká televize (ČT)", subscribers: null, tv_homes: "Near universal coverage", notes: "Public broadcaster - ČT1, ČT2, ČT24, ČT sport, ČT :D channels", ci_plus: false},
                {name: "TV Nova", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - leading commercial channel, operates Voyo VOD", ci_plus: false},
                {name: "Prima", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - Prima, Prima COOL, Prima LOVE, Prima ZOOM, Prima MAX, Prima KRIMI, Prima STAR channels", ci_plus: false},
                {name: "Warner TV", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - free-to-air channel launched 2024", ci_plus: false}
            ],
            "Denmark": [
                {name: "YouSee", subscribers: null, tv_homes: null, notes: "Cable/Telco - CI+ cam typically required for encrypted channels", ci_plus: true, pay_type: "premium"},
                {name: "Norlys", subscribers: null, tv_homes: null, notes: "Cable/Telco - CI+ cam typically required", ci_plus: true, pay_type: "premium"},
                {name: "Stofa", subscribers: null, tv_homes: null, notes: "Nordig operator - CI+ cam typically required", ci_plus: true, pay_type: "pay-lite"},
                {name: "Allente", subscribers: null, tv_homes: null, notes: "Satellite platform - uses smart cards, CI+ compatibility varies", ci_plus: null},
                {name: "Boxer HD", subscribers: null, tv_homes: null, notes: "Terrestrial pay-TV - CI+ cam typically required", ci_plus: true, pay_type: "pay-lite"},
                {name: "DR", subscribers: null, tv_homes: "Near universal coverage", notes: "Public broadcaster", ci_plus: false}
            ],
            "Estonia": [
                {name: "Elisa Estonia", subscribers: null, tv_homes: null, notes: "Telco - IPTV/Cable TV services, Elisa Elamus platform with 150+ channels", ci_plus: null},
                {name: "Telia Estonia", subscribers: null, tv_homes: null, notes: "Telco - IPTV services, broadband and mobile services", ci_plus: null},
                {name: "Tele2 Estonia", subscribers: null, tv_homes: null, notes: "Telco - mobile and fixed-line services", ci_plus: null},
                {name: "Levira", subscribers: null, tv_homes: null, notes: "Broadcasting infrastructure - operates Freeview TasutaTV terrestrial TV platform, hybrid TV services", ci_plus: null},
                {name: "ERR (Eesti Rahvusringhääling)", subscribers: null, tv_homes: "Near universal coverage", notes: "Public broadcaster - ETV, ETV2, ETV+ channels", ci_plus: false},
                {name: "TV3 Group", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - TV3, TV6 channels, Go3 streaming service", ci_plus: false},
                {name: "Alo TV", subscribers: null, tv_homes: null, notes: "Local broadcaster - Tartu region, music videos and local information", ci_plus: false}
            ],
            "Finland": [
                {name: "Elisa", subscribers: null, tv_homes: null, notes: "Telco - largest market share (37% revenue 2023), IPTV and cable TV services", ci_plus: null},
                {name: "Telia Finland", subscribers: null, tv_homes: null, notes: "Telco - broadband and TV services, collaborated with Teleste for cable network services", ci_plus: null},
                {name: "DNA", subscribers: null, tv_homes: null, notes: "Telco - 23% market share, broadband and TV services, deployed 4K content delivery", ci_plus: null},
                {name: "Allente", subscribers: null, tv_homes: null, notes: "Satellite/IPTV platform - formed from Canal Digital and Viasat Consumer merger (2020), uses smart cards, CI+ compatibility varies", ci_plus: null},
                {name: "Digita", subscribers: null, tv_homes: "~1.2 million households, 600,000 summer cottages", notes: "Pay-TV operator - largest pay-TV operator (2020), hybrid TV services, program libraries, on-demand channels", ci_plus: null},
                {name: "Yle (Yleisradio Oy)", subscribers: null, tv_homes: "Near universal coverage", notes: "Public broadcaster - YLE TV1, YLE TV2 channels, funded by public broadcasting tax", ci_plus: false},
                {name: "MTV Oy", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - MTV3, Sub, Ava channels, acquired by Schibsted Media (2025)", ci_plus: false},
                {name: "Nelonen Media", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - Nelonen, Jim, Liv, Hero channels", ci_plus: false},
                {name: "Star Channel", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - formerly Fox, owned by Disney Company Nordic AB", ci_plus: false}
            ],
            "France": [
                {name: "Fransat", subscribers: null, tv_homes: "~26.5M TV households, ~13.2M connected TV", ci_plus: true, pay_type: "pay-lite"},
                {name: "Orange France", subscribers: "~7.6-11.6 million", tv_homes: null, notes: "IPTV subscribers (varies by source/year)", ci_plus: false},
                {name: "Free France (Iliad)", subscribers: "~6.7-8.6 million", tv_homes: null, notes: "IPTV subscribers (varies by source/year)", ci_plus: false},
                {name: "Canal+ France", subscribers: "~4.7-9.1 million", tv_homes: null, notes: "Subscriber numbers vary by reporting method", ci_plus: true, pay_type: "premium"},
                {name: "France Télévisions", subscribers: null, tv_homes: "~29.4% market share, near universal coverage", notes: "Public broadcaster", ci_plus: false},
                {name: "TF1", subscribers: null, tv_homes: "Major commercial broadcaster", notes: "Commercial broadcaster", ci_plus: false}
            ],
            "Germany": [
                {name: "Unitymedia", subscribers: null, tv_homes: "~40M TV households (largest TV market in Europe)", notes: "Merged with Vodafone Germany", ci_plus: true, pay_type: "premium"},
                {name: "KDG/Vodafone", subscribers: "~8.9 million", tv_homes: null, notes: "Vodafone Germany (includes Unitymedia)", ci_plus: true, pay_type: "premium"},
                {name: "Deutsche Telekom Magenta TV", subscribers: "~4.7 million", tv_homes: null, notes: "As of June 2025", ci_plus: false},
                {name: "Telecolumbus(PÜYR)", subscribers: null, tv_homes: null, ci_plus: true, pay_type: "premium"},
                {name: "HD+ (In OBS context - 2024 - assume OpApp; Below for non-OpApp)", subscribers: null, tv_homes: null, ci_plus: true, pay_type: "pay-lite"},
                {name: "SKY", subscribers: "~2.3 million", tv_homes: "~11% of TV households", notes: "Sky Deutschland", ci_plus: true, pay_type: "premium"},
                {name: "ARD", subscribers: null, tv_homes: "Near universal coverage", notes: "Public broadcaster consortium", ci_plus: false},
                {name: "ZDF", subscribers: null, tv_homes: "Near universal coverage", notes: "Public broadcaster", ci_plus: false},
                {name: "ProSiebenSat.1 Media", subscribers: null, tv_homes: "~30% market share", notes: "Commercial broadcaster", ci_plus: false},
                {name: "DVB-T2 HD", subscribers: null, tv_homes: null, notes: "Terrestrial standard - not an operator", ci_plus: null},
                {name: "PYÜR", subscribers: null, tv_homes: null, ci_plus: true, pay_type: "premium"}
            ],
            "Georgia": [
                {name: "MagtiCom", subscribers: "~2.35 million mobile, ~363,507 IPTV (June 2025)", tv_homes: null, notes: "Telco - largest mobile operator (41.2% market share), IPTV services, 99% population coverage", ci_plus: null},
                {name: "Silknet", subscribers: null, tv_homes: null, notes: "Telco - telecommunications services", ci_plus: null},
                {name: "MagtiSat", subscribers: null, tv_homes: null, notes: "Satellite pay-TV platform - first digital satellite pay-TV service (2012), standard and HD channels", ci_plus: null},
                {name: "Cable Operators", subscribers: null, tv_homes: null, notes: "Cable TV - Electronic Communications Association of Georgia unifies cable operators", ci_plus: null},
                {name: "GPB (Georgian Public Broadcasting)", subscribers: null, tv_homes: "Near universal coverage", notes: "Public broadcaster - First Channel (1TV), Second Channel (Teleskola), established 2004", ci_plus: false},
                {name: "Rustavi 2", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - established 1998, one of most-watched channels", ci_plus: false},
                {name: "Imedi TV", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - launched 2009, one of most-watched channels", ci_plus: false},
                {name: "TV Pirveli", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - launched 2019, opposition-leaning channel", ci_plus: false},
                {name: "Maestro TV", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - launched 1995, diverse programming", ci_plus: false},
                {name: "Adjarasport", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - sports platform (Adjarasport1, Adjarasport2), Premier League rights", ci_plus: false},
                {name: "Formula TV", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - opposition outlet", ci_plus: false}
            ],
            "Greece": [
                {name: "Cosmote TV (OTE)", subscribers: null, tv_homes: null, notes: "Telco/Pay-TV - OTE (partially owned by Deutsche Telekom), Cosmote Sport and Cosmote Cinema channels, IPTV and satellite", ci_plus: null},
                {name: "Nova", subscribers: null, tv_homes: null, notes: "Pay-TV platform - Nova Sports and Nova Cinema channels, acquired by United Group (2020), satellite and OTT", ci_plus: null},
                {name: "Digea", subscribers: null, tv_homes: null, notes: "Digital terrestrial TV provider - consortium owned by private broadcasters, nationwide coverage", ci_plus: null},
                {name: "ERT (Hellenic Broadcasting Corporation)", subscribers: null, tv_homes: "Near universal coverage", notes: "Public broadcaster - ERT1, ERT2, ERT3 channels", ci_plus: false},
                {name: "ANT1", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - owned by Antenna Group, general entertainment and news", ci_plus: false},
                {name: "Alpha TV", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - news, series, and entertainment", ci_plus: false},
                {name: "Mega Channel", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - Greece's first private TV network (1989), family-oriented programming", ci_plus: false},
                {name: "Skai TV", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - news coverage, talk shows, documentaries, part of Skai Group", ci_plus: false},
                {name: "Star Channel", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - targets younger audience with drama and reality shows", ci_plus: false}
            ],
            "Hungary": [
                {name: "Magyar Telekom", subscribers: null, tv_homes: null, notes: "Telco - largest telecom operator, Telekom TV IPTV platform, partnered with SkyShowtime", ci_plus: null},
                {name: "UPC (Vodafone)", subscribers: null, tv_homes: "~26.8% market share (2016)", notes: "Cable/Telco - CI+ cam typically required for encrypted channels", ci_plus: true, pay_type: "premium"},
                {name: "DigiTV (Cable) - now 4iG/One Hungary", subscribers: null, tv_homes: "~24.9% market share (2016)", notes: "Pay-TV platform - sold to 4iG, merged into One Hungary (2025), CI+ cam typically required", ci_plus: true, pay_type: "premium"},
                {name: "DigiTV (Satellite) - now 4iG/One Hungary", subscribers: null, tv_homes: null, notes: "Pay-TV platform - sold to 4iG, merged into One Hungary (2025), CI+ cam typically required", ci_plus: true, pay_type: "premium"},
                {name: "One Hungary (4iG)", subscribers: null, tv_homes: null, notes: "Telco - launched 2025, combines Digi Hungary and Vodafone Hungary, fixed/mobile/pay-TV services", ci_plus: null},
                {name: "M7 (UPC Direct)", subscribers: null, tv_homes: null, notes: "Satellite platform - uses smart cards, CI+ compatibility varies", ci_plus: null},
                {name: "MinDigTV", subscribers: null, tv_homes: null, notes: "Terrestrial pay-TV - CI+ cam typically required", ci_plus: true, pay_type: "pay-lite"},
                {name: "Duna Média", subscribers: null, tv_homes: "Near universal coverage", notes: "Public broadcaster - M1, M2/Petőfi, M3, M4 Sport, M5, Duna, Duna World channels", ci_plus: false},
                {name: "RTL Klub", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - leading commercial channel", ci_plus: false},
                {name: "TV2", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - largest television portfolio in Hungary", ci_plus: false}
            ],
            "Iceland": [
                {name: "Síminn", subscribers: null, tv_homes: null, notes: "Telco - major telecommunications provider, mobile (2G/3G/4G/5G), fixed-line, DSL, fiber internet, Sjónvarp Símans TV service", ci_plus: null},
                {name: "Sýn", subscribers: null, tv_homes: null, notes: "Telco/TV Platform - formerly Vodafone Iceland (rebranded June 2025), mobile, internet, TV services, free-to-air channel Sýn (formerly Stöð 2)", ci_plus: null},
                {name: "Nova", subscribers: null, tv_homes: null, notes: "Telco - primary cellular service provider, mobile and internet services", ci_plus: null},
                {name: "IMC Iceland (Alterna)", subscribers: null, tv_homes: null, notes: "Telco - licensed GSM mobile operator, operates under brand Alterna", ci_plus: null},
                {name: "Míla", subscribers: null, tv_homes: null, notes: "Infrastructure - owns and operates Iceland's largest trunk telecommunication network, copper and fiber access networks, 10 Gbit/s service to households (2023)", ci_plus: null},
                {name: "RÚV (Ríkisútvarpið)", subscribers: null, tv_homes: "Near universal coverage", notes: "Public broadcaster - Icelandic National Broadcasting Service, RÚV and RÚV 2 channels, news, sports, entertainment, cultural programs", ci_plus: false},
                {name: "Sýn (Stöð 2)", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - free-to-air channel, entertainment, movies, daily evening news, rebranded from Stöð 2 (2025)", ci_plus: false},
                {name: "Sjónvarp Símans", subscribers: null, tv_homes: null, notes: "TV Platform - operated by Síminn, various channels and on-demand content", ci_plus: null},
                {name: "Sýn Sport", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - sports channel operated by Sýn", ci_plus: false},
                {name: "Síminn Sport", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - sports channel operated by Síminn", ci_plus: false},
                {name: "Gospel Channel", subscribers: null, tv_homes: ">80% population reach", notes: "Commercial broadcaster - Christian television channel (founded 1992), terrestrial, cable, IPTV", ci_plus: false},
                {name: "N4", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - regional television channel based in Akureyri, North Iceland content", ci_plus: false},
                {name: "Alþingi", subscribers: null, tv_homes: null, notes: "Public broadcaster - government channel broadcasting parliamentary sessions", ci_plus: false},
                {name: "Omega Christian Television", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - Christian television channel, religious programming", ci_plus: false}
            ],
            "Ireland": [
                {name: "VirginMedia", subscribers: null, tv_homes: null, notes: "Cable/Telco - CI+ cam typically required for encrypted channels", ci_plus: true, pay_type: "premium"},
                {name: "Sky Ireland", subscribers: null, tv_homes: null, notes: "Satellite pay-TV platform - uses proprietary systems", ci_plus: null},
                {name: "RTÉ", subscribers: null, tv_homes: "Near universal coverage", notes: "Public broadcaster", ci_plus: false},
                {name: "Saorview", subscribers: null, tv_homes: "~98% coverage", notes: "Free-to-air service - near universal coverage", ci_plus: false}
            ],
            "Italy": [
                {name: "Tivusat - LaTivu", subscribers: null, tv_homes: "~23.9M TV households, ~17M connected TV", notes: "Satellite platform - CI+ cam typically required for encrypted channels", ci_plus: true, pay_type: "pay-lite"},
                {name: "Sky Italia", subscribers: "~4.6 million", tv_homes: null, notes: "Satellite pay-TV platform - uses proprietary systems", ci_plus: null},
                {name: "RAI", subscribers: null, tv_homes: "~48.3% market share, near universal coverage", notes: "Public broadcaster", ci_plus: false},
                {name: "Mediaset", subscribers: null, tv_homes: "Major commercial broadcaster", notes: "Commercial broadcaster", ci_plus: false}
            ],
            "Luxembourg": [
                {name: "M7 (Telesat)", subscribers: null, tv_homes: null, notes: "Satellite platform - uses smart cards, CI+ compatibility varies", ci_plus: null}
            ],
            "Luxemburg": [
                {name: "M7 (Telesat)", subscribers: null, tv_homes: null, notes: "Satellite platform - uses smart cards, CI+ compatibility varies", ci_plus: null}
            ],
            "Lithuania": [
                {name: "Telia Lietuva", subscribers: null, tv_homes: null, notes: "Telco - IPTV/Cable TV services, largest telecom operator in Baltic States", ci_plus: null},
                {name: "Tele2 Lithuania", subscribers: "~1.8 million", tv_homes: null, notes: "Telco - largest mobile operator, offers TV services", ci_plus: null},
                {name: "Cgates", subscribers: null, tv_homes: null, notes: "Cable TV provider - Vilnius and Kaunas, multi-language channels", ci_plus: null},
                {name: "Init", subscribers: null, tv_homes: null, notes: "Cable TV provider - Kaunas region", ci_plus: null},
                {name: "Balticum TV", subscribers: null, tv_homes: null, notes: "Cable TV provider - Klaipėda region", ci_plus: null},
                {name: "LRT (Lietuvos nacionalinis radijas ir televizija)", subscribers: null, tv_homes: "Near universal coverage", notes: "Public broadcaster - LRT televizija, LRT Lituanica", ci_plus: false},
                {name: "LNK", subscribers: null, tv_homes: "~1 million daily viewers (2017)", notes: "Commercial broadcaster", ci_plus: false},
                {name: "TV3 Group", subscribers: null, tv_homes: "99% market penetration", notes: "Commercial broadcaster - TV3, TV6, TV8 channels", ci_plus: false},
                {name: "BTV", subscribers: null, tv_homes: "~80% territory coverage", notes: "Commercial broadcaster", ci_plus: false}
            ],
            "Latvia": [
                {name: "Tet", subscribers: null, tv_homes: null, notes: "Telco - IT and telecommunications provider, offers TV services", ci_plus: null},
                {name: "LMT (Latvijas Mobilais Telefons)", subscribers: null, tv_homes: null, notes: "Telco - leading mobile operator, offers TV services", ci_plus: null},
                {name: "Baltcom", subscribers: null, tv_homes: null, notes: "Cable/Telco - second-largest TV and internet provider, fiber optic services", ci_plus: null},
                {name: "TeleGroup", subscribers: null, tv_homes: null, notes: "Telco - GSM, internet, IP telephony services", ci_plus: null},
                {name: "LTV (Latvijas Televīzija)", subscribers: null, tv_homes: "Near universal coverage", notes: "Public broadcaster - LTV1, LTV7 channels", ci_plus: false},
                {name: "TV3 Group", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - TV3 Latvia, TV6 Latvia, TV3 Plus channels", ci_plus: false},
                {name: "LVRTC (Latvijas Valsts Radio un Televīzijas Centrs)", subscribers: null, tv_homes: null, notes: "Broadcasting infrastructure provider - state-owned", ci_plus: null}
            ],
            "Netherlands": [
                {name: "Ziggo/UPC. (Assume for Argon context \"connected\" (below for non)", subscribers: "~3.83 million", tv_homes: "~8.3M TV households (2023)", notes: "Cable/Telco - CI+ cam typically required for encrypted channels", ci_plus: true, pay_type: "premium"},
                {name: "KPN", subscribers: "~2.17 million", tv_homes: null, notes: "IPTV service - typically uses operator STBs", ci_plus: null},
                {name: "M7 (Canal Digitaal)", subscribers: null, tv_homes: null, notes: "Satellite platform - uses smart cards, CI+ compatibility varies", ci_plus: null},
                {name: "NPO", subscribers: null, tv_homes: "~46.3% market share, near universal coverage", notes: "Public broadcaster", ci_plus: false}
            ],
            "Norway": [
                {name: "Allente", subscribers: null, tv_homes: null, notes: "Satellite platform - uses smart cards, CI+ compatibility varies", ci_plus: null},
                {name: "RiksTV", subscribers: null, tv_homes: null, notes: "Terrestrial pay-TV - CI+ cam typically required (Nordig operator)", ci_plus: true, pay_type: "pay-lite"},
                {name: "Telenor", subscribers: "~1.90 million", tv_homes: null, notes: "IPTV service - typically uses operator STBs", ci_plus: null},
                {name: "NRK", subscribers: null, tv_homes: "Near universal coverage", notes: "Public broadcaster", ci_plus: false}
            ],
            "Poland": [
                {name: "UPC", subscribers: null, tv_homes: "Part of CEE region: 30M pay-TV households across 7 markets", notes: "Cable/Telco - CI+ cam typically required for encrypted channels", ci_plus: true, pay_type: "premium"},
                {name: "nc+/Canal+", subscribers: null, tv_homes: null, notes: "Platforma Canal+ - CI+ cam typically required for encrypted channels", ci_plus: true, pay_type: "premium"},
                {name: "Cyfrowy Polsat", subscribers: "~5.12 million", tv_homes: null, notes: "Satellite platform - CI+ cam typically required (Nagravision CAM)", ci_plus: true, pay_type: "premium"},
                {name: "TVP", subscribers: null, tv_homes: "~44.3% market share, near universal coverage", notes: "Public broadcaster", ci_plus: false}
            ],
            "Romania": [
                {name: "Digi Communications (RCS&RDS)", subscribers: "~6.6 million cable (2022)", tv_homes: "69% cable TV market share", notes: "Cable/Telco/TV Platform - leading provider, cable TV/broadband/mobile, DigiTV cable and satellite platforms, CI+ cam launched November 2013", ci_plus: true, pay_type: "premium"},
                {name: "Vodafone Romania (UPC)", subscribers: null, tv_homes: null, notes: "Cable/Telco - acquired UPC Romania (2019), mobile/fixed/broadband/TV, CI+ cam launched April 2012", ci_plus: true, pay_type: "premium"},
                {name: "Orange Romania", subscribers: null, tv_homes: null, notes: "Telco - mobile/fixed/broadband, Orange Home TV IPTV service, bundled with ultrafast broadband, catch-up TV, multi-device streaming", ci_plus: null},
                {name: "Telekom România", subscribers: ">4 million subscriptions (2022)", tv_homes: null, notes: "Telco - owned by OTE (Deutsche Telekom), mobile/fixed/broadband, Telekom TV satellite platform, IPTV services", ci_plus: null},
                {name: "Focus Sat (M7 Group)", subscribers: null, tv_homes: "~1.2 million satellite subscribers (2022)", notes: "Satellite platform - primary DTH provider, uses smart cards, CI+ compatibility varies", ci_plus: null},
                {name: "iNES", subscribers: null, tv_homes: null, notes: "IPTV service - first IPTV provider in Romania (2005), >160 channels, first HD TV in Romania (Nov 2008), FUNBOX 4K/UHD channel (Nov 2016)", ci_plus: null},
                {name: "TVR (Televiziunea Română)", subscribers: null, tv_homes: "Near universal coverage", notes: "Public broadcaster - TVR 1, TVR 2, TVR 3, TVR Info, TVR Cultural, TVR Folclor, TVR Sport channels", ci_plus: false},
                {name: "Pro TV", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - leading free-to-air network (launched Dec 1995), international series, movies, local productions, news", ci_plus: false},
                {name: "Antena 3 CNN", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - Antena 3 S.A. (Intact Media Group), CNN's exclusive news partner in Romania (Sep 2022)", ci_plus: false},
                {name: "Antena 1", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - Antena Group, entertainment and news", ci_plus: false},
                {name: "Kanal D", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - entertainment channel", ci_plus: false},
                {name: "Alfa Omega TV", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - Christian media organization, 24/7 channel (launched June 2006), free-to-air satellite across Europe, North Africa, Middle East", ci_plus: false}
            ],
            "Serbia": [
                {name: "Telekom Srbija", subscribers: null, tv_homes: "~25% pay-TV market share (pre-2025)", notes: "Telco - leading telecommunications provider, mobile/fixed/internet/TV, m:Sat TV DTH platform, Total TV satellite (co-owned), DVB-T2 pay-TV service with Conax Contego", ci_plus: null},
                {name: "SBB (Serbia Broadband)", subscribers: null, tv_homes: "~48% pay-TV market share (pre-2025), ~54% cable market share", notes: "Cable/Telco - major cable operator, pay TV/broadband/fixed telephony, acquired by e&PPF Telecom Group (Feb 2025)", ci_plus: null},
                {name: "Yettel (formerly Telenor Serbia)", subscribers: null, tv_homes: null, notes: "Telco - mobile and fixed telephony, internet services, operating under e&PPF Telecom Group", ci_plus: null},
                {name: "PoštaNet", subscribers: null, tv_homes: "~5% pay-TV market share", notes: "Cable/Telco - cable TV and internet services", ci_plus: null},
                {name: "Ikom", subscribers: null, tv_homes: "~4% pay-TV market share", notes: "Cable/Telco - cable TV services", ci_plus: null},
                {name: "Kopernikus", subscribers: null, tv_homes: "~3% pay-TV market share", notes: "Cable/Telco - cable TV services", ci_plus: null},
                {name: "m:Sat TV", subscribers: null, tv_homes: null, notes: "Satellite platform - Telekom Srbija DTH platform, SD and HD channels, expanded to Bosnia, Montenegro, North Macedonia", ci_plus: null},
                {name: "Total TV", subscribers: ">1 million (Southeast Europe)", tv_homes: null, notes: "Satellite platform - co-owned by Telekom Srbija, Eutelsat 16A satellite, serves Serbia, Bosnia, Croatia, Montenegro, North Macedonia, Slovenia", ci_plus: null},
                {name: "RTS (Radio Television of Serbia)", subscribers: null, tv_homes: "Near universal coverage", notes: "Public broadcaster - RTS 1, RTS 2, RTS 3, RTS Digital channels, news, entertainment, educational content", ci_plus: false},
                {name: "Prva Srpska Televizija (Prva TV)", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - national coverage, launched 2006 (initially Fox Televizija), entertainment, news, sports", ci_plus: false},
                {name: "Pink", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - popular commercial channel, entertainment and reality shows", ci_plus: false},
                {name: "Happy TV", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - entertainment channel", ci_plus: false},
                {name: "N1", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - United Group regional news channel, 24-hour news coverage, critical reporting", ci_plus: false},
                {name: "Nova S", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - United Group channel, mix of entertainment and news programming", ci_plus: false},
                {name: "Toxic TV", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - cable channel launched Dec 2019, regional music and entertainment, Toxic Folk and Toxic Rap sister channels", ci_plus: false},
                {name: "Arena Sport", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - Telekom Srbija sports channels, exclusive Premier League, UEFA competitions, national football leagues", ci_plus: false}
            ],
            "Slovakia": [
                {name: "Slovak Telekom", subscribers: null, tv_homes: null, notes: "Telco - Magio TV IPTV service, Digi TV satellite platform", ci_plus: null},
                {name: "Orange Slovensko", subscribers: null, tv_homes: null, notes: "Telco - IPTV and OTT services, largest telecom company in Slovakia", ci_plus: null},
                {name: "O2 Slovakia", subscribers: null, tv_homes: null, notes: "Telco - mobile and fixed broadband services", ci_plus: null},
                {name: "UPC Slovakia", subscribers: null, tv_homes: null, notes: "Cable/Telco - cable TV services", ci_plus: null},
                {name: "M7 (Skylink SK)", subscribers: null, tv_homes: null, notes: "Satellite platform - Czech and Slovak TV stations, uses smart cards, CI+ compatibility varies", ci_plus: null},
                {name: "ANTIK Sat", subscribers: null, tv_homes: null, notes: "Satellite platform - ~100 channels, one-third HD, online archive and second-screen capabilities", ci_plus: null},
                {name: "RTVS (Rozhlas a televízia Slovenska)", subscribers: null, tv_homes: "Near universal coverage", notes: "Public broadcaster - Jednotka, Dvojka, Trojka, RTVS Šport channels", ci_plus: false},
                {name: "Markíza", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - Markíza, Doma, Dajto, KRIMI channels", ci_plus: false},
                {name: "Prima SK", subscribers: null, tv_homes: null, notes: "Commercial broadcaster - rebranded from Prima Plus in 2024", ci_plus: false},
                {name: "DVB-T/T2 Spec", subscribers: null, tv_homes: null, notes: "Terrestrial standard - not an operator", ci_plus: null}
            ],
            "Spain": [
                {name: "TDT Hibrida (LovesTV). <--- separate out; LovesTV? as superset", subscribers: null, tv_homes: "~15.9M TV households, ~11M connected TV", notes: "Hybrid platform - CI+ cam requirements depend on specific service tier", ci_plus: null},
                {name: "RTVE", subscribers: null, tv_homes: "Near universal coverage", notes: "Public broadcaster", ci_plus: false}
            ],
            "Sweden": [
                {name: "Tele2", subscribers: "~2.17 million", tv_homes: null, notes: "IPTV service - typically uses operator STBs", ci_plus: null},
                {name: "Telenor", subscribers: "~1.90 million", tv_homes: null, notes: "IPTV service - typically uses operator STBs", ci_plus: null},
                {name: "Allente", subscribers: null, tv_homes: null, notes: "Satellite platform - uses smart cards, CI+ compatibility varies", ci_plus: null},
                {name: "Boxer HD", subscribers: "~500,000", tv_homes: null, notes: "Terrestrial pay-TV - CI+ cam typically required", ci_plus: true, pay_type: "pay-lite"},
                {name: "SVT", subscribers: null, tv_homes: "~29.8% market share, near universal coverage", notes: "Public broadcaster", ci_plus: false}
            ],
            "Switzerland": [
                {name: "UPC", subscribers: null, tv_homes: null, notes: "Cable/Telco - CI+ cam typically required for encrypted channels", ci_plus: true, pay_type: "premium"},
                {name: "Swisscom TV", subscribers: null, tv_homes: null, notes: "IPTV service - typically uses operator STBs", ci_plus: null},
                {name: "Kabelio", subscribers: null, tv_homes: null, notes: "Cable TV platform - CI+ cam typically required", ci_plus: true, pay_type: "premium"},
                {name: "SRG SSR", subscribers: null, tv_homes: "~30.1% market share, near universal coverage", notes: "Public broadcaster", ci_plus: false}
            ],
            "Turkey": [
                {name: "Türk Telekom", subscribers: null, tv_homes: "~14.6 million broadband subscribers", notes: "Telco - largest fixed-line operator, Tivibu IPTV service", ci_plus: null},
                {name: "Turkcell", subscribers: "~39.3 million", tv_homes: null, notes: "Telco - leading mobile operator, TV+ IPTV service", ci_plus: null},
                {name: "Digiturk", subscribers: null, tv_homes: null, notes: "Satellite pay-TV platform - leading digital TV platform, holds Süper Lig rights", ci_plus: null},
                {name: "D-Smart", subscribers: null, tv_homes: null, notes: "Satellite pay-TV platform", ci_plus: null},
                {name: "Türksat", subscribers: null, tv_homes: null, notes: "Satellite operator - sole communications satellite operator, operates Teledünya cable TV", ci_plus: null},
                {name: "TRT (Turkish Radio and Television Corporation)", subscribers: null, tv_homes: "Near universal coverage", notes: "Public broadcaster - multiple TV and radio channels", ci_plus: false},
                {name: "TRT EBA TV", subscribers: null, tv_homes: null, notes: "Educational broadcaster - launched 2020 for distance learning", ci_plus: false}
            ],
            "United Kingdom": [
                {name: "Freely", subscribers: null, tv_homes: "27.52M TV households (Q4 2024), ~18M connected TV", notes: "New hybrid TV platform (2024)", ci_plus: null},
                {name: "Sky UK", subscribers: "~7.73 million", tv_homes: "Satellite: 7.73M, Cable: 3.47M, Terrestrial: 3.06M", notes: "Satellite pay-TV platform", ci_plus: null},
                {name: "Virgin Media", subscribers: "~3 million", tv_homes: null, notes: "Cable operator", ci_plus: null},
                {name: "EE", subscribers: null, tv_homes: null, notes: "Telco IPTV", ci_plus: null},
                {name: "Talk Talk", subscribers: null, tv_homes: null, notes: "Telco IPTV", ci_plus: null},
                {name: "BBC", subscribers: null, tv_homes: "Near universal coverage, largest broadcaster", notes: "Public broadcaster", ci_plus: null},
                {name: "ITV", subscribers: null, tv_homes: "Major commercial broadcaster", notes: "Commercial broadcaster", ci_plus: null},
                {name: "Channel 4", subscribers: null, tv_homes: "Major broadcaster", notes: "Publicly owned, commercially funded", ci_plus: null}
            ],
            "UK": [
                {name: "Freely", subscribers: null, tv_homes: "27.52M TV households (Q4 2024), ~18M connected TV", notes: "New hybrid TV platform (2024)", ci_plus: null},
                {name: "Sky UK", subscribers: "~7.73 million", tv_homes: "Satellite: 7.73M, Cable: 3.47M, Terrestrial: 3.06M", notes: "Satellite pay-TV platform", ci_plus: null},
                {name: "Virgin Media", subscribers: "~3 million", tv_homes: null, notes: "Cable operator", ci_plus: null},
                {name: "EE", subscribers: null, tv_homes: null, notes: "Telco IPTV", ci_plus: null},
                {name: "Talk Talk", subscribers: null, tv_homes: null, notes: "Telco IPTV", ci_plus: null},
                {name: "BBC", subscribers: null, tv_homes: "Near universal coverage, largest broadcaster", notes: "Public broadcaster", ci_plus: null},
                {name: "ITV", subscribers: null, tv_homes: "Major commercial broadcaster", notes: "Commercial broadcaster", ci_plus: null},
                {name: "Channel 4", subscribers: null, tv_homes: "Major broadcaster", notes: "Publicly owned, commercially funded", ci_plus: null}
            ],
            "Ukraine": [
                {name: "No operator data available", subscribers: null, tv_homes: null, notes: "Ukraine not in original country list", ci_plus: null}
            ],
            "Portugal": [
                {name: "MEO (Altice Portugal)", subscribers: "~1.97 million", tv_homes: "~4.7M pay-TV subscribers, 97.1% penetration", notes: "IPTV service - typically uses operator STBs", ci_plus: null},
                {name: "NOS Group", subscribers: "~1.69 million", tv_homes: null, notes: "Cable and FTTH/B - CI+ cam typically required for cable encrypted channels", ci_plus: true, pay_type: "premium"},
                {name: "Vodafone Portugal", subscribers: "~912,000", tv_homes: null, notes: "IPTV service - typically uses operator STBs", ci_plus: null},
                {name: "Digi/Nowo Group", subscribers: "~122,000", tv_homes: null, notes: "Smaller player", ci_plus: null},
                {name: "RTP", subscribers: null, tv_homes: "Near universal coverage", notes: "Public broadcaster", ci_plus: false},
                {name: "SIC", subscribers: null, tv_homes: "Major commercial broadcaster", notes: "Commercial broadcaster", ci_plus: false},
                {name: "TVI", subscribers: null, tv_homes: "Major commercial broadcaster", notes: "Commercial broadcaster", ci_plus: false}
            ]
        };
        
        // Country name mapping (from TopoJSON codes to display names)
        const countryNameMap = {
            "AL": "Albania",
            "AM": "Armenia",
            "AZ": "Azerbaijan",
            "AT": "Austria",
            "BE": "Belgium",
            "BG": "Bulgaria",
            "BA": "Bosnia and Herz.",
            "BY": "Belarus",
            "CH": "Switzerland",
            "CZ": "Czech Rep.",
            "DE": "Germany",
            "DK": "Denmark",
            "EE": "Estonia",
            "FI": "Finland",
            "GB": "United Kingdom",
            "GR": "Greece",
            "HR": "Croatia",
            "HU": "Hungary",
            "IE": "Ireland",
            "IS": "Iceland",
            "IT": "Italy",
            "LT": "Lithuania",
            "LU": "Luxembourg",
            "LV": "Latvia",
            "MD": "Moldova",
            "MK": "Macedonia",
            "ME": "Montenegro",
            "NL": "Netherlands",
            "NO": "Norway",
            "PL": "Poland",
            "PT": "Portugal",
            "RO": "Romania",
            "RS": "Serbia",
            "SK": "Slovakia",
            "SI": "Slovenia",
            "SE": "Sweden",
            "TR": "Turkey",
            "UA": "Ukraine",
            "FR": "France",
            "GE": "Georgia",
            "ES": "Spain"
        };
        
        // Country name aliases for better matching
        const countryAliases = {
            "Armenia": ["Armenia", "Հայաստան", "AM"],
            "Azerbaijan": ["Azerbaijan", "Azərbaycan", "AZ"],
            "Austria": ["Austria", "Österreich", "AT"],
            "Georgia": ["Georgia", "საქართველო", "GE"],
            "Belarus": ["Belarus", "Беларусь", "BY"],
            "Belgium": ["Belgium", "België", "Belgique", "BE"],
            "Bulgaria": ["Bulgaria", "България", "BG"],
            "Croatia": ["Croatia", "Hrvatska", "HR"],
            "Czech": ["Czech", "Czech Republic", "Czech Rep.", "Česká republika", "CZ"],
            "Czech Rep.": ["Czech", "Czech Republic", "Czech Rep.", "Česká republika", "CZ"],
            "Denmark": ["Denmark", "Danmark", "DK"],
            "Estonia": ["Estonia", "Eesti", "EE"],
            "Finland": ["Finland", "Suomi", "FI"],
            "France": ["France", "FR"],
            "Germany": ["Germany", "Deutschland", "DE"],
            "Greece": ["Greece", "Ελλάδα", "GR"],
            "Hungary": ["Hungary", "Magyarország", "HU"],
            "Iceland": ["Iceland", "Ísland", "IS"],
            "Ireland": ["Ireland", "Éire", "IE"],
            "Italy": ["Italy", "Italia", "IT"],
            "Latvia": ["Latvia", "Latvija", "LV"],
            "Lithuania": ["Lithuania", "Lietuva", "LT"],
            "Luxembourg": ["Luxembourg", "Luxemburg", "Luxemburg", "LU"],
            "Luxemburg": ["Luxembourg", "Luxemburg", "Luxemburg", "LU"],
            "Netherlands": ["Netherlands", "Nederland", "Holland", "NL"],
            "Norway": ["Norway", "Norge", "NO"],
            "Poland": ["Poland", "Polska", "PL"],
            "Portugal": ["Portugal", "PT"],
            "Romania": ["Romania", "România", "RO"],
            "Serbia": ["Serbia", "Srbija", "RS"],
            "Slovakia": ["Slovakia", "Slovensko", "SK"],
            "Spain": ["Spain", "España", "ES"],
            "Sweden": ["Sweden", "Sverige", "SE"],
            "Switzerland": ["Switzerland", "Schweiz", "Suisse", "Svizzera", "CH"],
            "Turkey": ["Turkey", "Türkiye", "Türkiye Cumhuriyeti", "TR"],
            "United Kingdom": ["United Kingdom", "UK", "Great Britain", "Britain", "GB"],
            "UK": ["United Kingdom", "UK", "Great Britain", "Britain", "GB"]
        };
        
        // Function to normalize country names for matching
        function normalizeCountryName(name) {
            if (!name) return null;
            // Remove extra whitespace and convert to lowercase for comparison
            return name.trim().toLowerCase();
        }
        
        // Function to find country data by matching various name formats
        function findCountryData(countryName) {
            if (!countryName) return null;
            
            const normalized = normalizeCountryName(countryName);
            
            // First, try direct match (case-sensitive)
            if (countryData[countryName]) {
                return countryData[countryName];
            }
            
            // Try normalized direct match (case-insensitive)
            for (const [key, value] of Object.entries(countryData)) {
                if (normalizeCountryName(key) === normalized) {
                    return value;
                }
            }
            
            // Try matching through aliases (exact match only)
            for (const [key, aliases] of Object.entries(countryAliases)) {
                if (aliases.some(alias => normalizeCountryName(alias) === normalized)) {
                    return countryData[key];
                }
            }
            
            // Try partial matching (but be very strict to avoid false positives like "uk" matching "ukraine")
            // Only match if the shorter string is at least 5 characters to avoid short substring matches
            for (const [key, value] of Object.entries(countryData)) {
                const keyNormalized = normalizeCountryName(key);
                if (keyNormalized && normalized && keyNormalized !== normalized) {
                    const shorter = keyNormalized.length < normalized.length ? keyNormalized : normalized;
                    const longer = keyNormalized.length >= normalized.length ? keyNormalized : normalized;
                    // Require at least 5 chars to avoid "uk" matching "ukraine" or "united kingdom"
                    if (shorter.length >= 5 && longer.includes(shorter)) {
                        return value;
                    }
                }
            }
            
            // Try matching against aliases with partial match (very strict)
            for (const [key, aliases] of Object.entries(countryAliases)) {
                if (aliases.some(alias => {
                    const aliasNorm = normalizeCountryName(alias);
                    if (aliasNorm && normalized && aliasNorm !== normalized) {
                        const shorter = aliasNorm.length < normalized.length ? aliasNorm : normalized;
                        const longer = aliasNorm.length >= normalized.length ? aliasNorm : normalized;
                        // Require at least 5 chars
                        if (shorter.length >= 5 && longer.includes(shorter)) {
                            return true;
                        }
                    }
                    return false;
                })) {
                    return countryData[key];
                }
            }
            
            return null;
        }
        
        // Slide navigation
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide');
        const totalSlides = slides.length;
        
        // Update total slides indicator
        document.getElementById('total-slides').textContent = totalSlides;
        
        function showSlide(n) {
            slides[currentSlide].classList.remove('active');
            currentSlide = n;
            slides[currentSlide].classList.add('active');
            
            // Update slide indicator
            document.getElementById('slide-number').textContent = currentSlide + 1;
            
            // Update navigation buttons
            document.getElementById('prev-btn').disabled = currentSlide === 0;
            document.getElementById('next-btn').disabled = currentSlide === totalSlides - 1;
            
            // Initialize map when slide 3 is shown
            if (currentSlide === 2 && !mapInitialized) {
                initializeMap();
            }
        }
        
        function nextSlide() {
            if (currentSlide < totalSlides - 1) {
                showSlide(currentSlide + 1);
            }
        }
        
        function previousSlide() {
            if (currentSlide > 0) {
                showSlide(currentSlide - 1);
            }
        }
        
        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowRight' || e.key === 'ArrowDown') {
                nextSlide();
            } else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
                previousSlide();
            } else if (e.key === 'Escape') {
                closeOverlay();
            }
        });
        
        // Map initialization
        let map;
        let geoJsonLayer;
        let mapInitialized = false;
        let ciPlusFilterActive = false;
        let nordicDvbFilterActive = false;
        let hbbtvFilterActive = false;
        let obsCiPlusFilterActive = false;
        let tmobileFilterActive = false;
        let eu5FilterActive = false;
        let canalPlusFilterActive = false;
        let upcFilterActive = false;
        let originalStyles = new Map(); // Store original styles for each layer
        
        // Nordic DVB countries list
        const nordicDvbCountries = [
            'Denmark', 'Finland', 'Iceland', 'Norway', 'Sweden',
            'Faroe Islands', 'Greenland', 'Åland',
            // Alternative names that might appear in GeoJSON
            'Danmark', 'Suomi', 'Island', 'Norge', 'Sverige',
            'Færøerne', 'Grønland'
        ];
        
        // HbbTV countries list
        const hbbtvCountries = [
            'Albania', 'Algeria', 'Australia', 'Austria', 'Belarus', 'Belgium',
            'Bosnia', 'Bosnia and Herzegovina', 'Bulgaria', 'Croatia',
            'Czech Republic', 'Czech Rep.', 'Czech', 'Denmark', 'Egypt',
            'Estonia', 'Finland', 'France', 'Germany', 'Greece', 'Hungary',
            'Indonesia', 'Iran', 'Ireland', 'Italy', 'Jordan', 'Latvia',
            'Lebanon', 'Lithuania', 'Luxembourg', 'Moldova', 'Montenegro',
            'Morocco', 'New Zealand', 'North Macedonia', 'Macedonia', 'Norway',
            'Poland', 'Portugal', 'Qatar', 'Romania', 'Russia', 'Saudi Arabia',
            'Serbia', 'Slovakia', 'Slovenia', 'Spain', 'Sweden', 'Switzerland',
            'Netherlands', 'Tunisia', 'Turkey', 'Ukraine', 'United Arab Emirates',
            'United Kingdom', 'UK',
            // Alternative names that might appear in GeoJSON
            'Danmark', 'Suomi', 'Norge', 'Sverige', 'Nederland', 'Holland',
            'Deutschland', 'España', 'Espagne', 'Italia', 'Polska', 'România',
            'Россия', 'Российская Федерация', 'Türkiye', 'Türkiye Cumhuriyeti'
        ];
        
        function initializeMap() {
            if (mapInitialized) return;
            
            // Initialize the map
            map = L.map('map').setView([50.5, 10], 4);
            
            // Add tile layer (using a simple style for presentation)
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                maxZoom: 8
            }).addTo(map);
            
            const overlay = document.getElementById('country-overlay');
            const overlayTitle = document.getElementById('overlay-title');
            const overlayData = document.getElementById('overlay-data');
            
            // Interactivity functions
            function highlightFeature(e) {
                const layer = e.target;
                
                layer.setStyle({
                    weight: 3,
                    color: '#667eea',
                    dashArray: '',
                    fillOpacity: 0.7
                });
                
                if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
                    layer.bringToFront();
                }
                
                // Display country name on hover - use same logic as click handler
                const feature = layer.feature.properties;
                const countryName = feature.name || 
                                   feature.NAME || 
                                   feature.NAME_EN || 
                                   feature.NAME_ENG || 
                                   feature.admin || 
                                   feature.ADMIN ||
                                   feature.NAME_LONG ||
                                   feature.NAME_SORT ||
                                   feature.formal_en ||
                                   feature.name_en ||
                                   'Unknown';
                
                // Try to get the display name from our data
                const operators = findCountryData(countryName);
                // Find display name by matching the operators array
                let displayName = countryName;
                if (operators) {
                    for (const [key, value] of Object.entries(countryData)) {
                        // Compare arrays - check if they have same length and operator names match
                        if (Array.isArray(value) && Array.isArray(operators) && 
                            value.length === operators.length) {
                            // Check if operator names match (handle both string and object formats)
                            const namesMatch = value.every((op, idx) => {
                                const opName = typeof op === 'string' ? op : op.name;
                                const operatorName = typeof operators[idx] === 'string' ? operators[idx] : operators[idx].name;
                                return normalizeCountryName(opName) === normalizeCountryName(operatorName);
                            });
                            if (namesMatch) {
                                displayName = key;
                                break;
                            }
                        }
                    }
                }
                
                if (displayName && displayName !== 'Unknown') {
                    layer.bindTooltip(displayName, {
                        permanent: false,
                        direction: 'center',
                        className: 'country-tooltip'
                    }).openTooltip();
                }
            }
            
            function resetHighlight(e) {
                geoJsonLayer.resetStyle(e.target);
                e.target.closeTooltip();
            }
            
            function zoomToFeature(e) {
                map.fitBounds(e.target.getBounds(), { padding: [50, 50] });
            }
            
            function openOverlay(e) {
                const feature = e.target.feature.properties;
                console.log('Feature properties:', feature); // Debug: see what properties are available
                
                // Try multiple property names that might contain the country name
                const countryName = feature.name || 
                                   feature.NAME || 
                                   feature.NAME_EN || 
                                   feature.NAME_ENG || 
                                   feature.admin || 
                                   feature.ADMIN ||
                                   feature.NAME_LONG ||
                                   feature.NAME_SORT ||
                                   feature.formal_en ||
                                   feature.name_en ||
                                   'Unknown';
                
                console.log('Country name from GeoJSON:', countryName); // Debug
                
                // Find matching country data
                const operators = findCountryData(countryName);
                // Find display name by matching the operators array
                let displayName = countryName;
                if (operators) {
                    for (const [key, value] of Object.entries(countryData)) {
                        // Compare arrays - check if they have same length and operator names match
                        if (Array.isArray(value) && Array.isArray(operators) && 
                            value.length === operators.length) {
                            // Check if operator names match (handle both string and object formats)
                            const namesMatch = value.every((op, idx) => {
                                const opName = typeof op === 'string' ? op : op.name;
                                const operatorName = typeof operators[idx] === 'string' ? operators[idx] : operators[idx].name;
                                return normalizeCountryName(opName) === normalizeCountryName(operatorName);
                            });
                            if (namesMatch) {
                                displayName = key;
                                break;
                            }
                        }
                    }
                }
                
                console.log('Display name:', displayName, 'Operators found:', operators ? operators.length : 0); // Debug
                
                // Ensure overlay elements exist
                if (!overlay || !overlayTitle || !overlayData) {
                    console.error('Overlay elements not found!');
                    return;
                }
                
                overlayTitle.textContent = displayName;
                
                if (operators && operators.length > 0) {
                    let html = '<div class="operators"><h3>Operators:</h3><ul>';
                    operators.forEach(op => {
                        // Handle both old format (string) and new format (object)
                        let opName, opSubscribers, opTvHomes, opNotes, opCiPlus;
                        
                        if (typeof op === 'string') {
                            // Old format - just a string
                            opName = op.replace(/``+/g, '').replace(/`/g, '').trim();
                            opSubscribers = null;
                            opTvHomes = null;
                            opNotes = null;
                            opCiPlus = null;
                        } else {
                            // New format - object with name, subscribers, tv_homes, ci_plus
                            opName = op.name ? op.name.replace(/``+/g, '').replace(/`/g, '').trim() : '';
                            opSubscribers = op.subscribers;
                            opTvHomes = op.tv_homes;
                            opNotes = op.notes;
                            opCiPlus = op.ci_plus;
                        }
                        
                        if (opName) {
                            html += '<li class="operator-item">';
                            html += '<span class="operator-name-container">';
                            html += `<span class="operator-name">${opName}</span>`;
                            
                            // Add CI+ indicator (only show if CI+ is used)
                            if (opCiPlus === true) {
                                const opPayType = op.pay_type || 'premium'; // Default to premium if not specified
                                const payTypeClass = opPayType === 'pay-lite' ? 'pay-lite' : 'premium';
                                const payTypeTitle = opPayType === 'pay-lite' ? 'CI+ cam required - Pay-lite service' : 'CI+ cam required - Premium pay-TV';
                                html += `<span class="ci-plus-indicator ${payTypeClass}" title="${payTypeTitle}">CI+</span>`;
                            }
                            // Don't show CI+ pill if ci_plus is false or null
                            html += '</span>';
                            
                            // Add subscriber/TV home data if available
                            if (opSubscribers || opTvHomes) {
                                html += '<div class="operator-stats">';
                                if (opSubscribers) {
                                    html += `<span class="stat subscribers"><strong>Subscribers:</strong> ${opSubscribers}</span>`;
                                }
                                if (opTvHomes) {
                                    html += `<span class="stat tv-homes"><strong>TV Homes:</strong> ${opTvHomes}</span>`;
                                }
                                html += '</div>';
                            }
                            
                            // Add notes if available
                            if (opNotes) {
                                html += `<div class="operator-notes">${opNotes}</div>`;
                            }
                            
                            html += '</li>';
                        }
                    });
                    html += '</ul></div>';
                    overlayData.innerHTML = html;
                } else {
                    overlayData.innerHTML = `<p>No operator data available for ${displayName}.</p><p style="font-size: 0.9em; color: #666; margin-top: 10px;">If you have data for this country, please add it to country.md</p>`;
                }
                
                // Show overlay
                overlay.classList.add('active');
                console.log('Overlay should be visible now. Active class added:', overlay.classList.contains('active'));
            }
            
            function onEachFeature(feature, layer) {
                // Store original style
                const originalStyle = {
                    fillColor: '#FFEDA0',
                    weight: 1,
                    opacity: 1,
                    color: 'white',
                    fillOpacity: 0.5
                };
                originalStyles.set(layer, originalStyle);
                
                layer.on({
                    mouseover: highlightFeature,
                    mouseout: resetHighlight,
                    click: openOverlay
                });
            }
            
            // Fetch GeoJSON data for Europe
            // Using a working GeoJSON source
            const europeGeoJsonUrl = 'https://raw.githubusercontent.com/leakyMirror/map-of-europe/master/GeoJSON/europe.geojson';
            
            fetch(europeGeoJsonUrl)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Failed to fetch map data');
                    }
                    return response.json();
                })
                .then(geoJsonData => {
                    // Data is already GeoJSON, no conversion needed
                    
                    // Filter to show only European countries if needed, or use all data
                    geoJsonLayer = L.geoJSON(geoJsonData, {
                        style: function(feature) {
                            return {
                                fillColor: '#FFEDA0',
                                weight: 1,
                                opacity: 1,
                                color: 'white',
                                fillOpacity: 0.5
                            };
                        },
                        onEachFeature: onEachFeature
                    }).addTo(map);
                    
                    mapInitialized = true;
                })
                .catch(error => {
                    console.error('Error fetching or processing GeoJSON data:', error);
                    // Fallback: show error message
                    document.getElementById('map').innerHTML = 
                        '<div style="display: flex; align-items: center; justify-content: center; height: 100%; color: #666;">' +
                        '<p>Could not load map data. Please check your internet connection.</p>' +
                        '</div>';
                });
        }
        
        // Close overlay function (global scope for onclick handler)
        function closeOverlay() {
            const overlay = document.getElementById('country-overlay');
            if (overlay) {
                overlay.classList.remove('active');
            }
        }
        
        // Close overlay when clicking outside
        document.getElementById('country-overlay').addEventListener('click', function(e) {
            if (e.target === this) {
                closeOverlay();
            }
        });
        
        // Helper function to get country name from feature
        function getCountryNameFromFeature(feature) {
            return feature.name || 
                   feature.NAME || 
                   feature.NAME_EN || 
                   feature.NAME_ENG || 
                   feature.admin || 
                   feature.ADMIN ||
                   feature.NAME_LONG ||
                   feature.NAME_SORT ||
                   feature.formal_en ||
                   feature.name_en ||
                   'Unknown';
        }
        
        // Helper function to check if a country name matches Nordic DVB countries
        function isNordicDvbCountry(countryName) {
            const normalized = normalizeCountryName(countryName);
            return nordicDvbCountries.some(nordicCountry => {
                const normalizedNordic = normalizeCountryName(nordicCountry);
                return normalized === normalizedNordic || 
                       (normalized && normalizedNordic && normalized.includes(normalizedNordic)) ||
                       (normalized && normalizedNordic && normalizedNordic.includes(normalized));
            });
        }
        
        // Mapping of Recent OBS CI+ Operators to countries (by ISO country codes)
        const obsCiPlusOperators = {
            "NL": ["Ziggo", "Canal Digital"], // Netherlands
            "DE": ["PYUR", "Vodafone", "Unitymedia", "HD+", "MinDigTV"], // Germany
            "IT": ["TIVUSAT"], // Italy
            "FR": ["Fransat"], // France
            "AT": ["ORF"], // Austria
            "DK": ["YouSee", "NorDig"], // Denmark
            "BE": ["Voo", "Canal Digital"], // Belgium
            "NO": ["NorDig"], // Norway
            "SE": ["NorDig"], // Sweden
            "FI": ["NorDig"] // Finland
        };
        
        // Mapping of T-Mobile/Magenta platform countries (by ISO country codes)
        const tmobileMagentaCountries = {
            "AT": ["Magenta TV"], // Austria
            "CZ": ["T-Mobile Czech Republic (Magenta TV)"], // Czech Republic
            "DE": ["Deutsche Telekom Magenta TV"], // Germany
            "HU": ["Magenta TV"], // Hungary (Magyar Telekom)
            "RO": ["Magenta TV"], // Romania (Telekom Romania Mobile)
            "SK": ["Magenta TV"] // Slovakia (Slovak Telekom)
        };
        
        // Mapping of EU5 countries (by ISO country codes)
        const eu5Countries = {
            "GB": "United Kingdom", // UK
            "DE": "Germany",
            "FR": "France",
            "ES": "Spain",
            "IT": "Italy"
        };
        
        // Mapping of Canal+ platform countries (by ISO country codes)
        const canalPlusCountries = {
            "FR": ["Canal+ France"], // France
            "PL": ["nc+/Canal+"], // Poland
            "NL": ["Canal Digital"], // Netherlands (M7)
            "BE": ["Canal Digital"] // Belgium (M7)
        };
        
        // Mapping of UPC platform countries (by ISO country codes)
        const upcCountries = {
            "AT": ["Magenta TV (UPC)"], // Austria
            "CZ": ["UPC (now Vodafone)"], // Czech Republic
            "HU": ["UPC (Vodafone)", "M7 (UPC Direct)"], // Hungary
            "IE": ["UPC"], // Ireland
            "NL": ["Ziggo/UPC"], // Netherlands
            "PL": ["UPC"], // Poland
            "RO": ["Vodafone Romania (UPC)", "UPC"], // Romania
            "SK": ["UPC Slovakia"], // Slovakia
            "CH": ["UPC"] // Switzerland
        };
        
        // Helper function to check if a country has Recent OBS CI+ Operators
        function hasObsCiPlusOperators(countryName, feature) {
            // First, try to get ISO code directly from feature properties
            if (feature) {
                const isoCode = feature.ISO_A2 || feature.iso_a2 || feature.ISO_A2_EH || 
                               feature.ISO_A3 || feature.iso_a3 || feature.ISO || feature.iso;
                if (isoCode && obsCiPlusOperators.hasOwnProperty(isoCode)) {
                    return true;
                }
            }
            
            // Get country code from country name
            const normalized = normalizeCountryName(countryName);
            
            // Find matching country code
            for (const [code, displayName] of Object.entries(countryNameMap)) {
                const normalizedDisplay = normalizeCountryName(displayName);
                if (normalized === normalizedDisplay || 
                    (normalized && normalizedDisplay && normalized.includes(normalizedDisplay)) ||
                    (normalized && normalizedDisplay && normalizedDisplay.includes(normalized))) {
                    // Check if this country code has OBS CI+ operators
                    return obsCiPlusOperators.hasOwnProperty(code);
                }
            }
            
            // Also check aliases
            for (const [aliasName, aliases] of Object.entries(countryAliases)) {
                const normalizedAlias = normalizeCountryName(aliasName);
                if (normalized === normalizedAlias || 
                    (normalized && normalizedAlias && normalized.includes(normalizedAlias)) ||
                    (normalized && normalizedAlias && normalizedAlias.includes(normalized))) {
                    // Find country code from aliases
                    for (const [code, displayName] of Object.entries(countryNameMap)) {
                        if (aliases.includes(code) || aliases.includes(displayName)) {
                            return obsCiPlusOperators.hasOwnProperty(code);
                        }
                    }
                }
            }
            
            return false;
        }
        
        // Helper function to check if a country has T-Mobile/Magenta platform
        function hasTmobileMagenta(countryName, feature) {
            // First, try to get ISO code directly from feature properties
            if (feature) {
                const isoCode = feature.ISO_A2 || feature.iso_a2 || feature.ISO_A2_EH || 
                               feature.ISO_A3 || feature.iso_a3 || feature.ISO || feature.iso;
                if (isoCode && tmobileMagentaCountries.hasOwnProperty(isoCode)) {
                    return true;
                }
            }
            
            // Get country code from country name
            const normalized = normalizeCountryName(countryName);
            
            // Find matching country code
            for (const [code, displayName] of Object.entries(countryNameMap)) {
                const normalizedDisplay = normalizeCountryName(displayName);
                if (normalized === normalizedDisplay || 
                    (normalized && normalizedDisplay && normalized.includes(normalizedDisplay)) ||
                    (normalized && normalizedDisplay && normalizedDisplay.includes(normalized))) {
                    // Check if this country code has T-Mobile/Magenta
                    return tmobileMagentaCountries.hasOwnProperty(code);
                }
            }
            
            // Also check aliases
            for (const [aliasName, aliases] of Object.entries(countryAliases)) {
                const normalizedAlias = normalizeCountryName(aliasName);
                if (normalized === normalizedAlias || 
                    (normalized && normalizedAlias && normalized.includes(normalizedAlias)) ||
                    (normalized && normalizedAlias && normalizedAlias.includes(normalized))) {
                    // Find country code from aliases
                    for (const [code, displayName] of Object.entries(countryNameMap)) {
                        if (aliases.includes(code) || aliases.includes(displayName)) {
                            return tmobileMagentaCountries.hasOwnProperty(code);
                        }
                    }
                }
            }
            
            return false;
        }
        
        // Helper function to check if a country is in EU5
        function isEu5Country(countryName, feature) {
            // First, try to get ISO code directly from feature properties
            if (feature) {
                const isoCode = feature.ISO_A2 || feature.iso_a2 || feature.ISO_A2_EH || 
                               feature.ISO_A3 || feature.iso_a3 || feature.ISO || feature.iso;
                if (isoCode && eu5Countries.hasOwnProperty(isoCode)) {
                    return true;
                }
            }
            
            // Get country code from country name
            const normalized = normalizeCountryName(countryName);
            
            // Find matching country code
            for (const [code, displayName] of Object.entries(countryNameMap)) {
                const normalizedDisplay = normalizeCountryName(displayName);
                if (normalized === normalizedDisplay || 
                    (normalized && normalizedDisplay && normalized.includes(normalizedDisplay)) ||
                    (normalized && normalizedDisplay && normalizedDisplay.includes(normalized))) {
                    // Check if this country code is in EU5
                    return eu5Countries.hasOwnProperty(code);
                }
            }
            
            // Also check aliases
            for (const [aliasName, aliases] of Object.entries(countryAliases)) {
                const normalizedAlias = normalizeCountryName(aliasName);
                if (normalized === normalizedAlias || 
                    (normalized && normalizedAlias && normalized.includes(normalizedAlias)) ||
                    (normalized && normalizedAlias && normalizedAlias.includes(normalized))) {
                    // Find country code from aliases
                    for (const [code, displayName] of Object.entries(countryNameMap)) {
                        if (aliases.includes(code) || aliases.includes(displayName)) {
                            return eu5Countries.hasOwnProperty(code);
                        }
                    }
                }
            }
            
            return false;
        }
        
        // Helper function to check if a country has Canal+ platform
        function hasCanalPlus(countryName, feature) {
            // First, try to get ISO code directly from feature properties
            if (feature) {
                const isoCode = feature.ISO_A2 || feature.iso_a2 || feature.ISO_A2_EH || 
                               feature.ISO_A3 || feature.iso_a3 || feature.ISO || feature.iso;
                if (isoCode && canalPlusCountries.hasOwnProperty(isoCode)) {
                    return true;
                }
            }
            
            // Get country code from country name
            const normalized = normalizeCountryName(countryName);
            
            // Find matching country code
            for (const [code, displayName] of Object.entries(countryNameMap)) {
                const normalizedDisplay = normalizeCountryName(displayName);
                if (normalized === normalizedDisplay || 
                    (normalized && normalizedDisplay && normalized.includes(normalizedDisplay)) ||
                    (normalized && normalizedDisplay && normalizedDisplay.includes(normalized))) {
                    // Check if this country code has Canal+
                    return canalPlusCountries.hasOwnProperty(code);
                }
            }
            
            // Also check aliases
            for (const [aliasName, aliases] of Object.entries(countryAliases)) {
                const normalizedAlias = normalizeCountryName(aliasName);
                if (normalized === normalizedAlias || 
                    (normalized && normalizedAlias && normalized.includes(normalizedAlias)) ||
                    (normalized && normalizedAlias && normalizedAlias.includes(normalized))) {
                    // Find country code from aliases
                    for (const [code, displayName] of Object.entries(countryNameMap)) {
                        if (aliases.includes(code) || aliases.includes(displayName)) {
                            return canalPlusCountries.hasOwnProperty(code);
                        }
                    }
                }
            }
            
            return false;
        }
        
        // Helper function to check if a country has UPC platform
        function hasUpc(countryName, feature) {
            // First, try to get ISO code directly from feature properties
            if (feature) {
                const isoCode = feature.ISO_A2 || feature.iso_a2 || feature.ISO_A2_EH || 
                               feature.ISO_A3 || feature.iso_a3 || feature.ISO || feature.iso;
                if (isoCode && upcCountries.hasOwnProperty(isoCode)) {
                    return true;
                }
            }
            
            // Get country code from country name
            const normalized = normalizeCountryName(countryName);
            
            // Find matching country code
            for (const [code, displayName] of Object.entries(countryNameMap)) {
                const normalizedDisplay = normalizeCountryName(displayName);
                if (normalized === normalizedDisplay || 
                    (normalized && normalizedDisplay && normalized.includes(normalizedDisplay)) ||
                    (normalized && normalizedDisplay && normalizedDisplay.includes(normalized))) {
                    // Check if this country code has UPC
                    return upcCountries.hasOwnProperty(code);
                }
            }
            
            // Also check aliases
            for (const [aliasName, aliases] of Object.entries(countryAliases)) {
                const normalizedAlias = normalizeCountryName(aliasName);
                if (normalized === normalizedAlias || 
                    (normalized && normalizedAlias && normalized.includes(normalizedAlias)) ||
                    (normalized && normalizedAlias && normalizedAlias.includes(normalized))) {
                    // Find country code from aliases
                    for (const [code, displayName] of Object.entries(countryNameMap)) {
                        if (aliases.includes(code) || aliases.includes(displayName)) {
                            return upcCountries.hasOwnProperty(code);
                        }
                    }
                }
            }
            
            return false;
        }
        
        // Helper function to check if a country name matches HbbTV countries
        function isHbbtvCountry(countryName) {
            const normalized = normalizeCountryName(countryName);
            return hbbtvCountries.some(hbbtvCountry => {
                const normalizedHbbtv = normalizeCountryName(hbbtvCountry);
                return normalized === normalizedHbbtv || 
                       (normalized && normalizedHbbtv && normalized.includes(normalizedHbbtv)) ||
                       (normalized && normalizedHbbtv && normalizedHbbtv.includes(normalized));
            });
        }
        
        // Helper function to check if a country has CI+ operators
        function hasCiPlusOperators(countryName) {
            const operators = findCountryData(countryName);
            if (!operators || !Array.isArray(operators)) {
                return false;
            }
            
            const hasCiPlus = operators.some(op => {
                if (typeof op === 'string') return false;
                return op.ci_plus === true;
            });
            
            return hasCiPlus;
        }
        
        // Function to apply filters to map
        function applyMapFilters() {
            if (!geoJsonLayer) return;
            
            geoJsonLayer.eachLayer(function(layer) {
                const feature = layer.feature.properties;
                const countryName = getCountryNameFromFeature(feature);
                const originalStyle = originalStyles.get(layer) || {
                    fillColor: '#FFEDA0',
                    weight: 1,
                    opacity: 1,
                    color: 'white',
                    fillOpacity: 0.5
                };
                
                // Priority: HbbTV > Nordic DVB > OBS CI+ > T-Mobile/Magenta > EU5 > Canal+ > UPC > CI+
                if (hbbtvFilterActive && isHbbtvCountry(countryName)) {
                    // Color purple for HbbTV countries
                    layer.setStyle({
                        fillColor: '#7c3aed',
                        weight: 2,
                        opacity: 1,
                        color: '#6d28d9',
                        fillOpacity: 0.7
                    });
                } else if (nordicDvbFilterActive && isNordicDvbCountry(countryName)) {
                    // Color green for Nordic DVB countries
                    layer.setStyle({
                        fillColor: '#059669',
                        weight: 2,
                        opacity: 1,
                        color: '#047857',
                        fillOpacity: 0.7
                    });
                } else if (obsCiPlusFilterActive && hasObsCiPlusOperators(countryName, feature)) {
                    // Color orange/amber for Recent OBS CI+ Operators countries
                    layer.setStyle({
                        fillColor: '#f59e0b',
                        weight: 3,
                        opacity: 1,
                        color: '#d97706',
                        fillOpacity: 0.8
                    });
                } else if (tmobileFilterActive && hasTmobileMagenta(countryName, feature)) {
                    // Color teal/cyan for T-Mobile/Magenta countries
                    layer.setStyle({
                        fillColor: '#06b6d4',
                        weight: 3,
                        opacity: 1,
                        color: '#0891b2',
                        fillOpacity: 0.8
                    });
                } else if (eu5FilterActive && isEu5Country(countryName, feature)) {
                    // Color blue for EU5 countries
                    layer.setStyle({
                        fillColor: '#3b82f6',
                        weight: 3,
                        opacity: 1,
                        color: '#2563eb',
                        fillOpacity: 0.8
                    });
                } else if (canalPlusFilterActive && hasCanalPlus(countryName, feature)) {
                    // Color pink/magenta for Canal+ countries
                    layer.setStyle({
                        fillColor: '#ec4899',
                        weight: 3,
                        opacity: 1,
                        color: '#db2777',
                        fillOpacity: 0.8
                    });
                } else if (upcFilterActive && hasUpc(countryName, feature)) {
                    // Color indigo for UPC countries
                    layer.setStyle({
                        fillColor: '#6366f1',
                        weight: 3,
                        opacity: 1,
                        color: '#4f46e5',
                        fillOpacity: 0.8
                    });
                } else if (ciPlusFilterActive && hasCiPlusOperators(countryName)) {
                    // Color red for CI+ countries
                    layer.setStyle({
                        fillColor: '#dc2626',
                        weight: 2,
                        opacity: 1,
                        color: '#991b1b',
                        fillOpacity: 0.7
                    });
                } else if (ciPlusFilterActive || nordicDvbFilterActive || hbbtvFilterActive || obsCiPlusFilterActive || tmobileFilterActive || eu5FilterActive || canalPlusFilterActive || upcFilterActive) {
                    // Gray out countries that don't match active filters
                    layer.setStyle({
                        fillColor: '#d1d5db',
                        weight: 1,
                        opacity: 0.5,
                        color: '#9ca3af',
                        fillOpacity: 0.3
                    });
                } else {
                    // Reset to original style when no filters are active
                    layer.setStyle(originalStyle);
                }
            });
        }
        
        // CI+ Filter Toggle Function
        function toggleCiPlusFilter() {
            const checkbox = document.getElementById('ci-plus-filter-input');
            ciPlusFilterActive = checkbox.checked;
            applyMapFilters();
        }
        
        // Nordic DVB Filter Toggle Function
        function toggleNordicDvbFilter() {
            const checkbox = document.getElementById('nordic-dvb-filter-input');
            nordicDvbFilterActive = checkbox.checked;
            applyMapFilters();
        }
        
        // HbbTV Filter Toggle Function
        function toggleHbbtvFilter() {
            const checkbox = document.getElementById('hbbtv-filter-input');
            hbbtvFilterActive = checkbox.checked;
            applyMapFilters();
        }
        
        // OBS CI+ Operators Filter Toggle Function
        function toggleObsCiPlusFilter() {
            const checkbox = document.getElementById('obs-ci-plus-filter-input');
            obsCiPlusFilterActive = checkbox.checked;
            applyMapFilters();
        }
        
        // T-Mobile/Magenta Filter Toggle Function
        function toggleTmobileFilter() {
            const checkbox = document.getElementById('tmobile-filter-input');
            tmobileFilterActive = checkbox.checked;
            applyMapFilters();
        }
        
        // EU5 Filter Toggle Function
        function toggleEu5Filter() {
            const checkbox = document.getElementById('eu5-filter-input');
            eu5FilterActive = checkbox.checked;
            applyMapFilters();
        }
        
        // Canal+ Filter Toggle Function
        function toggleCanalPlusFilter() {
            const checkbox = document.getElementById('canal-plus-filter-input');
            canalPlusFilterActive = checkbox.checked;
            applyMapFilters();
        }
        
        // UPC Filter Toggle Function
        function toggleUpcFilter() {
            const checkbox = document.getElementById('upc-filter-input');
            upcFilterActive = checkbox.checked;
            applyMapFilters();
        }
        
        // Initialize first slide
        showSlide(0);
    </script>
</body>
</html>

